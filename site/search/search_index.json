{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"index.html","title":"Welcome to MkDocs1111","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"index.html#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"index.html#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    index_copy.md\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"Golang/Golang%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1.html","title":"Golang\u5b66\u4e60\u7b14\u8bb0-\u5b9a\u65f6\u4efb\u52a1","text":""},{"location":"Golang/Golang%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1.html#_1","title":"\u6307\u5b9a\u5177\u4f53\u65f6\u95f4\u6267\u884c","text":"<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\nfunc main() {\n    // \u6307\u5b9a\u6267\u884c\u65f6\u95f4\u4e3a 2023-11-29 00:00:00\n    executionTime := time.Date(2023, time.November, 29, 0, 0, 0, 0, time.UTC)\n\n    // \u5f53\u524d\u65f6\u95f4\n    now := time.Now().UTC()\n\n    // \u8ba1\u7b97\u8ddd\u79bb\u6267\u884c\u65f6\u95f4\u7684\u6301\u7eed\u65f6\u95f4\n    duration := executionTime.Sub(now)\n\n    // \u4f7f\u7528 time.AfterFunc \u5b89\u6392\u5728\u6307\u5b9a\u65f6\u95f4\u6267\u884c\u7684\u51fd\u6570\n    time.AfterFunc(duration, func() {\n        fmt.Println(\"\u6267\u884c\u5b9a\u65f6\u4efb\u52a1...\")\n        // \u5728\u8fd9\u91cc\u6dfb\u52a0\u4f60\u7684\u4efb\u52a1\u903b\u8f91\n    })\n\n    // \u4e3b\u7a0b\u5e8f\u53ef\u4ee5\u7ee7\u7eed\u6267\u884c\u5176\u4ed6\u5de5\u4f5c\n    // ...\n\n    // \u963b\u585e\u7a0b\u5e8f\uff0c\u76f4\u5230\u6309\u4e0b Ctrl+C \u624d\u9000\u51fa\n    select {}\n}\n\n</code></pre>"},{"location":"Golang/Golang%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1.html#_2","title":"\u5b9a\u671f\u6267\u884c","text":""},{"location":"Golang/Golang%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1.html#1-time","title":"1. time\u6a21\u5757","text":"<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\nfunc main() {\n    // \u521b\u5efa\u4e00\u4e2a\u5b9a\u65f6\u5668\uff0c\u6bcf\u9694\u4e00\u6bb5\u65f6\u95f4\u89e6\u53d1\u4e00\u6b21\n    ticker := time.NewTicker(5 * time.Second)\n\n    // \u542f\u52a8\u4e00\u4e2a goroutine \u6765\u5904\u7406\u5b9a\u65f6\u4efb\u52a1\n    go func() {\n        for {\n            select {\n            case &lt;-ticker.C:\n                // \u8fd9\u91cc\u5199\u5165\u4f60\u60f3\u8981\u5b9a\u671f\u6267\u884c\u7684\u4efb\u52a1\n                fmt.Println(\"\u5b9a\u65f6\u4efb\u52a1\u6267\u884c:\", time.Now())\n            }\n        }\n    }()\n\n    // \u7b49\u5f85\u7a0b\u5e8f\u7ed3\u675f\uff0c\u53ef\u4ee5\u4f7f\u7528\u901a\u9053\u6216\u8005\u5176\u4ed6\u65b9\u5f0f\n    select {}\n}\n</code></pre>"},{"location":"Golang/Golang%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1.html#2cron","title":"2.cron\u6a21\u5757","text":"<p>go get github.com/robfig/cron</p> <pre><code>package main\n\nimport (\n    \"fmt\"\n    \"github.com/robfig/cron\"\n)\n\nfunc main() {\n    // \u521b\u5efa\u4e00\u4e2a\u65b0\u7684 cron \u5b9e\u4f8b\n    c := cron.New()\n\n    // \u6dfb\u52a0\u4f60\u7684\u5b9a\u65f6\u4efb\u52a1\uff0c\u8fd9\u91cc\u662f\u4e00\u4e2a\u6bcf\u5206\u949f\u6267\u884c\u4e00\u6b21\u7684\u4f8b\u5b50\n    c.AddFunc(\"* * * * *\", func() {\n        fmt.Println(\"\u6267\u884c\u5b9a\u65f6\u4efb\u52a1...\")\n    })\n\n    // \u542f\u52a8 cron\n    c.Start()\n\n    // \u4e3b\u7a0b\u5e8f\u53ef\u4ee5\u7ee7\u7eed\u6267\u884c\u5176\u4ed6\u5de5\u4f5c\n    // ...\n\n    // \u963b\u585e\u7a0b\u5e8f\uff0c\u76f4\u5230\u6309\u4e0b Ctrl+C \u624d\u9000\u51fa\n    select {}\n}\n\n</code></pre>"},{"location":"Linux/Systemd%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html","title":"systemd","text":"<p>Unit \u7684\u914d\u7f6e\u6587\u4ef6</p> <ul> <li><code>[Unit]</code>\u533a\u5757\u901a\u5e38\u662f\u914d\u7f6e\u6587\u4ef6\u7684\u7b2c\u4e00\u4e2a\u533a\u5757\uff0c\u7528\u6765\u5b9a\u4e49 Unit \u7684\u5143\u6570\u636e\uff0c\u4ee5\u53ca\u914d\u7f6e\u4e0e\u5176\u4ed6 Unit \u7684\u5173\u7cfb</li> <li><code>[Install]</code>\u901a\u5e38\u662f\u914d\u7f6e\u6587\u4ef6\u7684\u6700\u540e\u4e00\u4e2a\u533a\u5757\uff0c\u7528\u6765\u5b9a\u4e49\u5982\u4f55\u542f\u52a8\uff0c\u4ee5\u53ca\u662f\u5426\u5f00\u673a\u542f\u52a8</li> <li><code>[Service]</code>\u533a\u5757\u7528\u6765 Service \u7684\u914d\u7f6e\uff0c\u53ea\u6709 Service \u7c7b\u578b\u7684 Unit \u624d\u6709\u8fd9\u4e2a\u533a\u5757</li> </ul>"},{"location":"Linux/Systemd%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#unit","title":"Unit\u6587\u4ef6","text":"<pre><code>[Unit]\n# *\u63cf\u8ff0\nDescription=Flask project\n# \u9879\u76ee\u6587\u6863\n# Documentation=/home/python_env/code/flask_demo1/README.md\n# \u9879\u76ee\u542f\u52a8\u65f6\u9700\u8981\u4f9d\u8d56\u7684\u524d\u7f6e\u670d\u52a1\n# Before=network.target\n# *\u9879\u76ee\u542f\u52a8\u540e\u9700\u8981\u4f9d\u8d56\u7684\u540e\u7f6e\u670d\u52a1\nAfter=network.target\n# \u9879\u76ee\u542f\u52a8\u65f6\u4f9d\u8d56\u7684\u5176\u4ed6\u670d\u52a1\n# Requires: mysql.target\n\n[Service]\n# *\u542f\u52a8\u65b9\u5f0f\uff0c\u9ed8\u8ba4\u4e3asimple\uff0c\u5176\u4ed6\u542f\u52a8\u65b9\u5f0f\u6709forking\u3001oneshot\u3001notify\u3001dbus\u3001exec\u3001idle\nType = forking\n# \u542f\u52a8\u524d\u6267\u884c\nExecStartPre =/bin/echo \"flask_demo1 \u5f00\u59cb\u542f\u52a8\"\n# *\u542f\u52a8\u9879\u76ee\nExecStart=/home/python_env/venv/flask_demo/bin/python flask_demo1.py\n# \u9879\u76ee\u542f\u52a8\u540e\u6267\u884c\nExecStartPost =/bin/echo \"flask_demo1 \u542f\u52a8\u5b8c\u6210\"\n# \u9879\u76ee\u505c\u6b62\u65f6\u6267\u884c\nExecStop=/bin/echo \"flask_demo1 \u505c\u6b62\"\n# *\u542f\u52a8\u5931\u8d25\u540e\u91cd\u542f(always:\u603b\u662f\u91cd\u542f\uff0con-success\u3001on-failure\u3001on-abnormal\u3001on-abort\u3001on-watchdog)\nRestart=always\n# *\u8bbe\u7f6e\u670d\u52a1\u5de5\u4f5c\u76ee\u5f55\nWorkingDirectory=/home/python_env/code\n# \u6307\u5b9a\u73af\u5883\u53d8\u91cf\n# Environment=FLASK_APP=flask_demo1.py\n# \u8bbe\u7f6e\u9879\u76ee\u542f\u52a8\u7684\u7528\u6237\nUser=python_env\n# \u8bbe\u7f6e\u9879\u76ee\u542f\u52a8\u7684\u7528\u6237\u7ec4\nGroup=python_env\n# \u8bbe\u7f6e\u9879\u76ee\u8f93\u51fa\n# StandardOutput=syslog\n\n[Install]\n# \u8be5\u53c2\u6570\u8868\u793a\u6b64Unit\u662f\u5f00\u673a\u542f\u52a8\u65f6\u5019\u5173\u8054\u5230multi-user.target\n# \u5f53multi-user.target\u4e0b\u9762\u7684\u4efb\u610f\u4e00\u4e2aUnit\u542f\u52a8\u90fd\u4f1a\u89e6\u53d1\u672cUnit\u7684\u542f\u52a8\n# \u5373enable\u72b6\u6001\u7684\u65f6\u5019\u4f1a\u521b\u5efa\u4e00\u4e2a\u94fe\u63a5\u5230/etc/systemd/system/multi-user.target.wants/\u76ee\u5f55\u4e0b\u9762\nWantedBy=multi-user.target\n</code></pre> <p>\u5c06\u4e0a\u8ff0\u5185\u5bb9\u5199\u5165<code>flask_demo1.service</code>,\u5c06\u8be5\u6587\u4ef6\u653e\u5165<code>/usr/lib/systemd/system/</code>\u76ee\u5f55\u4e0b,\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4<code>systemctl daemon-reload</code>,\u7136\u540e\u6267\u884c<code>systemctl start flask_demo1.service</code>\u5373\u53ef\u542f\u52a8\u670d\u52a1</p>"},{"location":"Linux/Systemd%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#systemctl","title":"\u5e38\u7528systemctl\u547d\u4ee4","text":""},{"location":"Linux/Systemd%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#_1","title":"\u542f\u52a8\u670d\u52a1","text":"<p>systemctl start flask_demo1.service</p>"},{"location":"Linux/Systemd%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#_2","title":"\u505c\u6b62\u670d\u52a1","text":"<p>systemctl stop flask_demo1.service</p>"},{"location":"Linux/Systemd%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#_3","title":"\u91cd\u542f\u670d\u52a1","text":"<p>systemctl restart flask_demo1.service</p>"},{"location":"Linux/Systemd%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#_4","title":"\u67e5\u770b\u670d\u52a1\u72b6\u6001","text":"<p>systemctl status flask_demo1.service</p>"},{"location":"Linux/Systemd%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#_5","title":"\u67e5\u770b\u670d\u52a1\u65e5\u5fd7","text":"<p>journalctl -u flask_demo1.service</p>"},{"location":"Linux/Systemd%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#systemd-service","title":"\u91cd\u8f7d\u800c\u4e0d\u91cd\u542f(\u7528\u4e8e\u91cd\u65b0\u52a0\u8f7d systemd \u7684\u5b88\u62a4\u8fdb\u7a0b\u914d\u7f6e,\u5728\u4fee\u6539service\u6587\u4ef6\u540e\u9700\u8981\u6267\u884c)","text":"<p>systemctl daemon-reload</p>"},{"location":"Linux/Systemd%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#_6","title":"\u91cd\u8f7d\u800c\u4e0d\u91cd\u542f(\u7528\u4e8e\u91cd\u65b0\u52a0\u8f7d\u670d\u52a1\u7684\u914d\u7f6e)","text":"<p>systemctl reload flask_demo1.service</p>"},{"location":"Linux/Systemd%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#centos7systemd","title":"\u666e\u901a\u7528\u6237\u6267\u884c(\u9700\u8981\u6ce8\u610f\u7684\u662fcentos7\u6267\u884c\u5931\u8d25\uff0c\u53ef\u80fd\u662fsystemd\u7248\u672c\u7684\u95ee\u9898)","text":"<p>\u9700\u8981\u5148\u5728\u666e\u901a\u7528\u6237\u7684\u6a21\u5f0f\u4e0b\u521b\u5efa\u76ee\u5f55<code>~/.config/systemd/user/</code></p> <p>systemctl --user start flask_demo1.service</p>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-Grafana%E5%8F%AF%E8%A7%86%E5%8C%96.html","title":"Grafana\u5b98\u7f51","text":""},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-Grafana%E5%8F%AF%E8%A7%86%E5%8C%96.html#grafana_1","title":"\u4e0b\u8f7dGrafana","text":"<pre><code>[root@VM-24-9-centos Prometheus_server]# wget httpsdl.grafana.comossreleasegrafana-9.3.2.linux-amd64.tar.gz\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-Grafana%E5%8F%AF%E8%A7%86%E5%8C%96.html#grafana_2","title":"\u5b89\u88c5Grafana","text":"<pre><code>[root@VM-24-9-centos Prometheus_server]# tar -zxvf grafana-9.3.2.linux-amd64.tar.gz\n[root@VM-24-9-centos Prometheus_server]# cd grafana-9.3.2bin\n# \u542f\u52a8Grafana\n[root@VM-24-9-centos bin]# nohup .grafana-server &amp;\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-Grafana%E5%8F%AF%E8%A7%86%E5%8C%96.html#grafana_3","title":"\u914d\u7f6eGrafana","text":"<p>\u7aef\u53e3\u9ed8\u8ba43000\uff0c\u8bbf\u95ee\u5730\u5740 localhost3000\uff0c\u9ed8\u8ba4\u8d26\u53f7\u5bc6\u7801 adminadmin</p>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-Grafana%E5%8F%AF%E8%A7%86%E5%8C%96.html#_1","title":"\u9009\u62e9\u6570\u636e\u6e90","text":""},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-Grafana%E5%8F%AF%E8%A7%86%E5%8C%96.html#dashboard","title":"\u9009\u62e9dashboard","text":"<p>\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u6570\u636e\u6e90\u67e5\u8be2\u5408\u9002\u7684dashboard\u4eea\u8868\u76d8\uff0c\u8fd9\u91cc\u6211\u4eec\u9009\u62e9\u7b2c\u4e00\u4e2a\uff0c\u5982\u679c\u6ca1\u6709\u81ea\u5df1\u559c\u6b22\u7684\uff0c\u53ef\u4ee5\u81ea\u5df1\u5728grafana\u91cc\u7f16\u5199\uff0c\u5c0f\u767d\u8fd8\u662f\u76f4\u63a5\u7528\u73b0\u6210\u7684\u8f6e\u5b50\u5427\uff0c\u563b\u563b</p> <p> </p>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-Grafana%E5%8F%AF%E8%A7%86%E5%8C%96.html#_2","title":"\u663e\u793a\u6548\u679c","text":"<p>dashboard\u5305\u542b\u4e86CPU\uff0c\u5185\u5b58\uff0c\u7f51\u7edc\uff0c\u78c1\u76d8\uff0cio\u7b49\u4fe1\u606f</p> <p> </p>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-Label%E6%A0%87%E7%AD%BE.html","title":"Label","text":"<p>Lable\u662f\u4e3a\u4e86\u65b9\u4fbf\u7ba1\u7406\u53ca\u67e5\u8be2\u76d1\u63a7\u76ee\u6807\uff0c\u5728\u540e\u7eed\u5199promtheus\u67e5\u8be2\u8bed\u6cd5\u7684\u65f6\u5019\u9700\u8981\u4f7f\u7528\u6807\u7b7e\u4f5c\u4e3a\u67e5\u8be2\u6761\u4ef6</p>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-Label%E6%A0%87%E7%AD%BE.html#_1","title":"\u914d\u7f6e\u6587\u4ef6","text":"<pre><code># A scrape configuration containing exactly one endpoint to scrape:\n# Here it's Prometheus itself.\nscrape_configs:\n  # \u5b9a\u4e49\u4e00\u4e2ajob\u540d\u79f0\n  - job_name: \"prometheus\"\n\n    # \u9ed8\u8ba4\u6307\u6807\u5730\u5740 '/metrics'\n    metrics_path: '/metrics'\n    # scheme defaults to 'http'.\n    scheme: 'http'\n\n      # \u9759\u6001\u6307\u5b9a\u6bcf\u4e00\u4e2a\u76d1\u63a7\u76ee\u6807\n    static_configs:\n      # \u76d1\u63a7\u76ee\u6807\u8282\u70b9\u5730\u5740\uff0c\u53ef\u4ee5\u5e76\u5217\u5199\u5165\u591a\u4e2a\u76ee\u6807\u8282\u70b9\u5730\u5740\uff08\u683c\u5f0f\u4e3a \u673a\u5668ip\uff1a\u7aef\u53e3\uff09,\u4ee5\u9017\u53f7\u9694\u5f00\n      - targets: [\"localhost:9090\"]\n        # \u6807\u7b7e\n        labels:\n          env: 'test'\n</code></pre> <p>\u4e0a\u6587\u914d\u7f6e\u6587\u4ef617\uff0c18\u4e24\u884c\u5b9e\u73b0\u4e86\u65b0\u589e\u4e00\u4e2alabel\u6807\u7b7e <code>env</code></p>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-Label%E6%A0%87%E7%AD%BE.html#_2","title":"\u663e\u793a\u6548\u679c","text":"<p> \u6ce8\u610f\uff1a\u5728\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u540e\uff0c\u9700\u8981\u91cd\u542fPrometheus\u670d\u52a1</p>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-file_sd_config.html","title":"\u57fa\u4e8e\u6587\u4ef6\u53d1\u73b0","text":"<p>\u4e00\u822c\u4e00\u4e2ajob\u4f5c\u4e3a\u4e00\u4e2a\u4e1a\u52a1\u670d\u52a1\uff0c\u5b83\u4e0b\u9762\u7684\u76d1\u63a7\u7684\u673a\u5668/\u8282\u70b9\u90fd\u662f\u8fd9\u4e2a\u670d\u52a1\u7684\u8282\u70b9\uff0c\u4e3a\u4e86\u65b9\u4fbf\u7ba1\u7406\uff0c\u6211\u4eec\u53ef\u4ee5\u6309\u7167job\u5212\u5206\uff0c\u4e3a\u6bcf\u4e2ajob\u521b\u5efa\u4e00\u4e2a\u5b50\u914d\u7f6e\u6587\u4ef6\uff0c\u8fd9\u6837\u65b9\u4fbf\u7ba1\u7406</p>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-file_sd_config.html#_1","title":"\u914d\u7f6e\u6587\u4ef6","text":"<pre><code># my global config\nglobal:\n  scrape_interval: 15s # #\u6bcf15s\u91c7\u96c6\u4e00\u6b21\u6570\u636e\n  evaluation_interval: 15s #\u6bcf15s\u505a\u4e00\u6b21\u544a\u8b66\u68c0\u6d4b.\n  # scrape_timeout is set to the global default (10s).\n\n# Alertmanager configuration(\u544a\u8b66\u914d\u7f6e)\nalerting:\n  alertmanagers:\n    - static_configs:\n        - targets:\n          # - alertmanager:9093\n\n# rule_files \u52a0\u8f7d\u544a\u8b66\u89c4\u5219\u6587\u4ef6\nrule_files:\n  # - \"first_rules.yml\"\n  # - \"second_rules.yml\"\n\n# A scrape configuration containing exactly one endpoint to scrape:\n# Here it's Prometheus itself.\nscrape_configs:\n  # \u5b9a\u4e49\u4e00\u4e2ajob\u540d\u79f0\n  - job_name: \"prometheus\"\n\n    # \u9ed8\u8ba4\u6307\u6807\u5730\u5740 '/metrics'\n    metrics_path: '/metrics'\n    # scheme defaults to 'http'.\n    scheme: 'http'\n\n      # \u57fa\u4e8e\u6587\u4ef6\u7684\u670d\u52a1\u53d1\u73b0\u63d0\u4f9b\u4e86\u4e00\u79cd\u66f4\u901a\u7528\u7684\u65b9\u6cd5\u6765\u914d\u7f6e\u9759\u6001\u76ee\u6807\uff0c\u5b50\u914d\u7f6e\u6587\u4ef6\u652f\u6301json\u548cyaml\n    file_sd_configs:\n      - files: [\"./child_config/prometheus.yml\"]\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-file_sd_config.html#_2","title":"\u521b\u5efa\u5b50\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55","text":"<pre><code>[root@VM-24-9-centos prometheus-2.41.0.linux-amd64]# mkdir -p child_config\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-file_sd_config.html#_3","title":"\u521b\u5efa\u5b50\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>[root@VM-24-9-centos prometheus-2.41.0.linux-amd64]# cd child_config\n[root@VM-24-9-centos prometheus-2.41.0.linux-amd64]# touch prometheus.yml\n</code></pre> <pre><code>- targets: [\"localhost:9090\"]\n  labels:\n    env: 'test'\n    host: 'localhost'\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-file_sd_config.html#_4","title":"\u663e\u793a\u6548\u679c","text":""},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%91%8A%E8%AD%A6%E8%A7%84%E5%88%99%E9%85%8D%E7%BD%AE.html","title":"\u544a\u8b66\u89c4\u5219\u914d\u7f6e","text":""},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%91%8A%E8%AD%A6%E8%A7%84%E5%88%99%E9%85%8D%E7%BD%AE.html#demo","title":"\u544a\u8b66\u89c4\u5219Demo","text":"<pre><code>groups:\n# \u544a\u8b66\u7ec4\u540d\u79f0\n- name: host_memory \n  rules:\n  # \u544a\u8b66\u89c4\u5219\u540d\u79f0\n  - alert: HighMemroy \n    # \u544a\u8b66\u89c4\u5219\uff08\u4f8b\u5b50\uff1a\u4e0b\u9762\u7684\u544a\u8b66\u89c4\u5219\u662f\u5185\u5b58\u5927\u4e8e30%\u544a\u8b66\u7684PromQL\u67e5\u8be2\u8bed\u6cd5\uff09\n    expr: ((node_memory_MemTotal_bytes - node_memory_MemFree_bytes - node_memory_Buffers_bytes - node_memory_Cached_bytes) / (node_memory_MemTotal_bytes )) * 100 &gt; 30\n    # for\uff1a\u7b49\u5f85\u65f6\u95f4\uff0c\u8868\u793a\u5f53\u89e6\u53d1\u6761\u4ef6\u6301\u7eed\u4e00\u6bb5\u65f6\u95f4\u540e\u624d\u4f1a\u89e6\u53d1\u544a\u8b66\uff0c\u5728\u7b49\u5f85\u671f\u95f4\u65b0\u4ea7\u751f\u7684\u544a\u8b66\u72b6\u6001\u4e3apending\n    for: 1m\n    # \u81ea\u5b9a\u4e49\u6807\u7b7e\uff0cPrometheus\u672c\u8eab\u6709\u4e00\u90e8\u5206\u6807\u7b7e\uff0c\u8fd9\u91cc\u53ef\u4ee5\u9644\u52a0\u989d\u5916\u7684\u6807\u7b7e\u5230\u544a\u8b66\u4e0a\n    labels:\n      type: memory\n    # \u7528\u4e8e\u6307\u5b9a\u4e00\u7ec4\u9644\u52a0\u4fe1\u606f\uff0c\u6bd4\u5982\u7528\u4e8e\u63cf\u8ff0\u544a\u8b66\u8be6\u7ec6\u4fe1\u606f\u7684\u6587\u5b57\u7b49\n    annotations:\n      # \u901a\u8fc7$labels.&lt;labelname&gt;\u53d8\u91cf\u53ef\u4ee5\u8bbf\u95ee\u5f53\u524d\u544a\u8b66\u5b9e\u4f8b\u4e2d\u6307\u5b9a\u6807\u7b7e\u7684\u503c\u3002$value\u5219\u53ef\u4ee5\u83b7\u53d6\u5f53\u524dPromQL\u8868\u8fbe\u5f0f\u8ba1\u7b97\u7684\u6837\u672c\u503c\u3002\n      # \u8fd9\u91cc\u662f\u7c7b\u4f3c\u4e8e\u6807\u9898\u7684\u6548\u679c\uff0c\u7b80\u8ff0\u4e0b\u544a\u8b66\u4fe1\u606f\uff08\u6bd4\u5982\u662f\u4ec0\u4e48\u7c7b\u578b\u7684\u544a\u8b66\uff09\n      summarg: \"Instance {{$labels.instance}} Memory high\"\n      # \u8fd9\u91cc\u76f8\u5f53\u4e8e\u6b63\u6587\uff0c\u4e3b\u8981\u63cf\u8ff0\u544a\u8b66\u7684\u9608\u503c\uff0c\u662f\u54ea\u53f0\u5b9e\u4f8b\u4e3b\u673a\u53d1\u751f\u544a\u8b66\u7b49\u8be6\u7ec6\u4fe1\u606f\n      description: \"{{$labels.instance}} memory usage above 30% (current value :{{$value}})\"\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%91%8A%E8%AD%A6%E8%A7%84%E5%88%99%E9%85%8D%E7%BD%AE.html#prometheus-","title":"Prometheus \u914d\u7f6e\u6587\u4ef6-\u544a\u8b66\u90e8\u5206","text":"<pre><code># my global config\nglobal:\n  scrape_interval: 15s \n  evaluation_interval: 15s # \u544a\u8b66\u8ba1\u7b97\u5468\u671f,\u9ed8\u8ba4\u4e3a1m\n# Alertmanager configuration\nalerting:\n  alertmanagers:\n    - static_configs:\n        - targets:\n          - alertmanager:9093\nrule_files:\n  # \u544a\u8b66\u89c4\u5219\u6587\u4ef6\u5b58\u653e\u8def\u5f84\uff0c\u6587\u4ef6\u540e\u7f00\u5fc5\u987b\u662frules\uff0c\u6bd4\u5982 cpu.rules\n  - \"/usr/local/src/prometheus/prometheus-2.44.0-rc.2.linux-amd64/rules/*.rules\"\nscrape_configs:\n  - job_name: \"prometheus\"\n    static_configs:\n      - targets: [\"localhost:9090\"]\n  - job_name: \"node_exporter\"\n    static_configs:\n      - targets: [\"localhost:9100\"]\n  - job_name: \"nginx_exporter\"\n    static_configs:\n      - targets: [\"localhost:9113\"]\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%91%8A%E8%AD%A6%E8%A7%84%E5%88%99%E9%85%8D%E7%BD%AE.html#_1","title":"\u544a\u8b66\u6d3b\u52a8\u72b6\u6001\u67e5\u8be2","text":"<pre><code>ALERTS{alertname=\"&lt;alert name&gt;\", alertstate=\"pending|firing\", &lt;additional alert labels&gt;}\n</code></pre> <p>\u6837\u672c\u503c\u4e3a1\u8868\u793a\u5f53\u524d\u544a\u8b66\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\uff08pending\u6216\u8005firing\uff09\uff0c\u5f53\u544a\u8b66\u4ece\u6d3b\u52a8\u72b6\u6001\u8f6c\u6362\u4e3a\u975e\u6d3b\u52a8\u72b6\u6001\u65f6\uff0c\u6837\u672c\u503c\u5219\u4e3a0\u3002</p>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%91%8A%E8%AD%A6%E8%A7%84%E5%88%99%E9%85%8D%E7%BD%AE.html#_2","title":"\u5c55\u793a\u6548\u679c","text":"<p>\u914d\u7f6e\u5b8c\u6210\u540e\u91cd\u542fPrometheus\u670d\u52a1</p> <p>\u8bbf\u95ee\u5730\u5740\uff1a http://localhost:9090/alerts?search=</p> <p></p>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85.html","title":"\u5b98\u7f51","text":"<p>https://prometheus.io/docs/introduction/overview/</p>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85.html#prometheus","title":"\u4e0b\u8f7dPrometheus","text":"<p>https://prometheus.io/download/</p>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85.html#prometheus_1","title":"\u5b89\u88c5Prometheus","text":""},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85.html#_2","title":"\u914d\u7f6e\u6587\u4ef6","text":"<pre><code># my global config\nglobal:\n  scrape_interval: 15s # #\u6bcf15s\u91c7\u96c6\u4e00\u6b21\u6570\u636e\n  evaluation_interval: 15s #\u6bcf15s\u505a\u4e00\u6b21\u544a\u8b66\u68c0\u6d4b.\n  # scrape_timeout is set to the global default (10s).\n\n# Alertmanager configuration(\u544a\u8b66\u914d\u7f6e)\nalerting:\n  alertmanagers:\n    - static_configs:\n        - targets:\n          # - alertmanager:9093\n\n# rule_files \u52a0\u8f7d\u544a\u8b66\u89c4\u5219\u6587\u4ef6\nrule_files:\n  # - \"first_rules.yml\"\n  # - \"second_rules.yml\"\n\n# A scrape configuration containing exactly one endpoint to scrape:\n# Here it's Prometheus itself.\nscrape_configs:\n  # \u5b9a\u4e49\u4e00\u4e2ajob\u540d\u79f0\n  - job_name: \"prometheus\"\n\n    # \u9ed8\u8ba4\u6307\u6807\u5730\u5740 '/metrics'\n    metrics_path: '/metrics'\n    # scheme defaults to 'http'.\n    scheme: 'http'\n\n      # \u9759\u6001\u6307\u5b9a\u6bcf\u4e00\u4e2a\u76d1\u63a7\u76ee\u6807\n    static_configs:\n      # \u76d1\u63a7\u76ee\u6807\u8282\u70b9\u5730\u5740\uff0c\u53ef\u4ee5\u5e76\u5217\u5199\u5165\u591a\u4e2a\u76ee\u6807\u8282\u70b9\u5730\u5740\uff08\u683c\u5f0f\u4e3a \u673a\u5668ip\uff1a\u7aef\u53e3\uff09,\u4ee5\u9017\u53f7\u9694\u5f00\n      - targets: [\"localhost:9090\"]\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85.html#_3","title":"\u542f\u52a8\u670d\u52a1","text":"<pre><code>[root@VM-24-9-centos prometheus-2.41.0.linux-amd64]# ./prometheus --config.file='prometheus.yml'\n\nts=2023-01-08T03:53:40.822Z caller=main.go:512 level=info msg=\"No time or size retention was set so using the default time retention\" duration=15d\nts=2023-01-08T03:53:40.823Z caller=main.go:556 level=info msg=\"Starting Prometheus Server\" mode=server version=\"(version=2.41.0, branch=HEAD, revision=c0d8a56c69014279464c0e15d8bfb0e153af0dab)\"\nts=2023-01-08T03:53:40.823Z caller=main.go:561 level=info build_context=\"(go=go1.19.4, platform=linux/amd64, user=root@d20a03e77067, date=20221220-10:40:45)\"\nts=2023-01-08T03:53:40.823Z caller=main.go:562 level=info host_details=\"(Linux 3.10.0-1160.11.1.el7.x86_64 #1 SMP Fri Dec 18 16:34:56 UTC 2020 x86_64 VM-24-9-centos (none))\"\nts=2023-01-08T03:53:40.823Z caller=main.go:563 level=info fd_limits=\"(soft=100002, hard=100002)\"\nts=2023-01-08T03:53:40.823Z caller=main.go:564 level=info vm_limits=\"(soft=unlimited, hard=unlimited)\"\nts=2023-01-08T03:53:40.840Z caller=web.go:559 level=info component=web msg=\"Start listening for connections\" address=0.0.0.0:9090\nts=2023-01-08T03:53:40.840Z caller=main.go:993 level=info msg=\"Starting TSDB ...\"\nts=2023-01-08T03:53:40.842Z caller=tls_config.go:232 level=info component=web msg=\"Listening on\" address=[::]:9090\nts=2023-01-08T03:53:40.842Z caller=tls_config.go:235 level=info component=web msg=\"TLS is disabled.\" http2=false address=[::]:9090\nts=2023-01-08T03:53:40.843Z caller=head.go:562 level=info component=tsdb msg=\"Replaying on-disk memory mappable chunks if any\"\nts=2023-01-08T03:53:40.843Z caller=head.go:606 level=info component=tsdb msg=\"On-disk memory mappable chunks replay completed\" duration=3.827\u00b5s\nts=2023-01-08T03:53:40.843Z caller=head.go:612 level=info component=tsdb msg=\"Replaying WAL, this may take a while\"\nts=2023-01-08T03:53:40.845Z caller=head.go:683 level=info component=tsdb msg=\"WAL segment loaded\" segment=0 maxSegment=0\nts=2023-01-08T03:53:40.845Z caller=head.go:720 level=info component=tsdb msg=\"WAL replay completed\" checkpoint_replay_duration=14.226\u00b5s wal_replay_duration=2.00604ms wbl_replay_duration=130ns total_replay_duration=2.041035ms\nts=2023-01-08T03:53:40.846Z caller=main.go:1014 level=info fs_type=EXT4_SUPER_MAGIC\nts=2023-01-08T03:53:40.846Z caller=main.go:1017 level=info msg=\"TSDB started\"\nts=2023-01-08T03:53:40.846Z caller=main.go:1197 level=info msg=\"Loading configuration file\" filename=prometheus.yml\nts=2023-01-08T03:53:40.847Z caller=main.go:1234 level=info msg=\"Completed loading of configuration file\" filename=prometheus.yml totalDuration=555.287\u00b5s db_storage=2.605\u00b5s remote_storage=2.565\u00b5s web_handler=160ns query_engine=451ns scrape=259.664\u00b5s scrape_sd=20.178\u00b5s notify=28.153\u00b5s notify_sd=8.496\u00b5s rules=2.965\u00b5s tracing=13.535\u00b5s\nts=2023-01-08T03:53:40.847Z caller=main.go:978 level=info msg=\"Server is ready to receive web requests.\"\nts=2023-01-08T03:53:40.847Z caller=manager.go:953 level=info component=\"rule manager\" msg=\"Starting rule manager...\"\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85.html#_4","title":"\u663e\u793a\u6548\u679c","text":"<p>Prometheus\u9ed8\u8ba4\u7aef\u53e3\u4e3a 9090\uff0c\u8bbf\u95ee\u5730\u5740\u4e3a<code>ip:9090</code>, \u80fd\u770b\u5230\u5982\u4e0b\u9875\u9762\u5c31\u4ee3\u8868Prometheus\u5b89\u88c5\u6210\u529f\u4e86(\u5982\u679c\u662f\u5728\u4e91\u670d\u52a1\u5668\u4e0a\u5b89\u88c5\uff0c\u9700\u8981\u5f00\u901a\u9632\u706b\u5899) </p>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85.html#webui","title":"\u67e5\u770b\u914d\u7f6e\u6587\u4ef6(\u5728webui\u4e2d\u67e5\u770b)","text":""},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85.html#webui_1","title":"\u67e5\u770b\u76d1\u63a7\u8282\u70b9\uff08\u5728webui\u4e2d\u67e5\u770b\uff09","text":""},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85Node_exporter.html","title":"\u5b89\u88c5Node_exporter","text":"<p>Node_exporter\u662f\u53ef\u4ee5\u5728* Nix\u548cLinux\u7cfb\u7edf\u4e0a\u8fd0\u884c\u7684\u8ba1\u7b97\u673a\u5ea6\u91cf\u6807\u51c6\u7684\u5bfc\u51fa\u5668\u3002 Node_exporter \u4e3b\u8981\u7528\u4e8e\u66b4\u9732 metrics \u7ed9 Prometheus\uff0c\u5176\u4e2d metrics \u5305\u62ec\uff1acpu \u7684\u8d1f\u8f7d\uff0c\u5185\u5b58\u7684\u4f7f\u7528\u60c5\u51b5\uff0c\u7f51\u7edc\u7b49\u3002</p>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85Node_exporter.html#_1","title":"\u914d\u7f6e\u6587\u4ef6","text":""},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85Node_exporter.html#_2","title":"\u4fee\u6539\u4e3b\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>[root@VM-24-9-centos prometheus-2.41.0.linux-amd64]# vi prometheus.yml\nglobal:\n  scrape_interval: 15s # #\u6bcf15s\u91c7\u96c6\u4e00\u6b21\u6570\u636e\n  evaluation_interval: 15s #\u6bcf15s\u505a\u4e00\u6b21\u544a\u8b66\u68c0\u6d4b.\n  # scrape_timeout is set to the global default (10s).\n\n# Alertmanager configuration(\u544a\u8b66\u914d\u7f6e)\nalerting:\n  alertmanagers:\n    - static_configs:\n        - targets:\n          # - alertmanager:9093\n\n# rule_files \u52a0\u8f7d\u544a\u8b66\u89c4\u5219\u6587\u4ef6\nrule_files:\n  # - \"first_rules.yml\"\n  # - \"second_rules.yml\"\n\n# A scrape configuration containing exactly one endpoint to scrape:\n# Here it's Prometheus itself.\nscrape_configs:\n  # \u5b9a\u4e49\u4e00\u4e2ajob\u540d\u79f0\n  - job_name: \"prometheus\"\n\n    # \u9ed8\u8ba4\u6307\u6807\u5730\u5740 '/metrics'\n    metrics_path: '/metrics'\n    # scheme defaults to 'http'.\n    scheme: 'http'\n    file_sd_configs:\n      - files: [\"/usr/local/src/Prometheus_server/prometheus-2.41.0.linux-amd64/child_config/prometheus.yml\"]\n\n  - job_name: \"node_exporter\"\n    metrics_path: '/metrics'\n    scheme: 'http'\n    file_sd_configs:\n      - files: [\"/usr/local/src/Prometheus_server/prometheus-2.41.0.linux-amd64/child_config/node_exporter.yml\"]\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85Node_exporter.html#_3","title":"\u65b0\u589e\u5b50\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>[root@VM-24-9-centos child_config]# vi node_exporter.yml \n- targets: ['localhost:9100']\n  labels:\n    env: 'test'\n    host: 'localhosti'\n    type: 'node_exporter'\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85Node_exporter.html#node_exporter","title":"\u4e0b\u8f7dnode_exporter","text":"<pre><code># \u4e0b\u8f7d\nwget https://github.com/prometheus/node_exporter/releases/download/v1.5.0/node_exporter-1.5.0.linux-amd64.tar.gz\n# \u4f7f\u7528\u7b2c\u4e09\u65b9\u52a0\u901f https://ghproxy.com/\nwget wget https://ghproxy.com/https://github.com/prometheus/node_exporter/releases/download/v1.5.0/node_exporter-1.5.0.linux-amd64.tar.gz\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85Node_exporter.html#node_exporter_1","title":"\u5b89\u88c5node_exporter","text":"<pre><code>[root@VM-24-9-centos exporter_package]# tar -zxvf node_exporter-1.5.0.linux-amd64.tar.gz \nnode_exporter-1.5.0.linux-amd64/\nnode_exporter-1.5.0.linux-amd64/LICENSE\nnode_exporter-1.5.0.linux-amd64/NOTICE\nnode_exporter-1.5.0.linux-amd64/node_exporter\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85Node_exporter.html#node_exporter_2","title":"node_exporter\u542f\u52a8","text":""},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85Node_exporter.html#_4","title":"\u5e38\u7528\u542f\u52a8\u914d\u7f6e\u9879","text":"<pre><code>--web.listen-address=\":9100\"  \n#node_exporter\u76d1\u542c\u7684\u7aef\u53e3\uff0c\u9ed8\u8ba4\u662f9100\uff0c\u82e5\u9700\u8981\u4fee\u6539\u5219\u901a\u8fc7\u6b64\u53c2\u6570\u3002\n\n--web.telemetry-path=\"/metrics\"  \n#\u83b7\u53d6metric\u4fe1\u606f\u7684url\uff0c\u9ed8\u8ba4\u662f/metrics\uff0c\u82e5\u9700\u8981\u4fee\u6539\u5219\u901a\u8fc7\u6b64\u53c2\u6570\n\n--log.level=\"info\" \n#\u8bbe\u7f6e\u65e5\u5fd7\u7ea7\u522b\n\n--log.format=\"logger:stderr\"  \n#\u8bbe\u7f6e\u6253\u5370\u65e5\u5fd7\u7684\u683c\u5f0f\uff0c\u82e5\u6709\u81ea\u52a8\u5316\u65e5\u5fd7\u63d0\u53d6\u5de5\u5177\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u53c2\u6570\u89c4\u8303\u65e5\u5fd7\u6253\u5370\u7684\u683c\u5f0f\n\n# \u4ee5\u4e0b\u5185\u5bb9\u4e0d\u5e38\u7528\n--collector.diskstats.ignored-devices=\"^(ram|loop|fd|(h|s|v|xv)d[a-z]|nvme\\\\d+n\\\\d+p)\\\\d+$\"\n#\u901a\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f\u5ffd\u7565\u67d0\u4e9b\u78c1\u76d8\u7684\u4fe1\u606f\u6536\u96c6\n\n--collector.filesystem.ignored-mount-points=\"^/(dev|proc|sys|var/lib/docker/.+)($|/)\"  \n#\u901a\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f\u5ffd\u7565\u67d0\u4e9b\u6587\u4ef6\u7cfb\u7edf\u6302\u8f7d\u70b9\u7684\u4fe1\u606f\u6536\u96c6\n\n--collector.filesystem.ignored-fs-types=\"^(autofs|binfmt_misc|bpf|cgroup2?|configfs|debugfs|devpts|devtmpfs|fusectl|hugetlbfs|mqueue|nsfs|overlay|proc|procfs|pstore|rpc_pipefs|securityfs|selinuxfs|squashfs|sysfs|tracefs)$\"  \n#\u901a\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f\u5ffd\u7565\u67d0\u4e9b\u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b\u7684\u4fe1\u606f\u6536\u96c6\n\n--collector.netclass.ignored-devices=\"^$\"  \n#\u901a\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f\u5ffd\u7565\u67d0\u4e9b\u7f51\u7edc\u7c7b\u7684\u4fe1\u606f\u6536\u96c6\n\n--collector.netdev.ignored-devices=\"^$\"  \n#\u901a\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f\u5ffd\u7565\u67d0\u4e9b\u7f51\u7edc\u8bbe\u5907\u7684\u4fe1\u606f\u6536\u96c6\n\n  --collector.netstat.fields=\"^$\"\n #\u901a\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f\u914d\u7f6e\u9700\u8981\u83b7\u53d6\u7684\u7f51\u7edc\u72b6\u6001\u4fe1\u606f\n\n--collector.vmstat.fields=\"^(oom_kill|pgpg|pswp|pg.*fault).*\" \n#\u901a\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f\u914d\u7f6evmstat\u8fd4\u56de\u4fe1\u606f\u4e2d\u9700\u8981\u6536\u96c6\u7684\u9009\u9879\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85Node_exporter.html#node_exporter_3","title":"\u542f\u52a8node_exporter","text":"<pre><code>[root@VM-24-9-centos node_exporter-1.5.0.linux-amd64]# nohup ./node_exporter --web.listen-address=\":9100\" &amp;\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85Node_exporter.html#_5","title":"\u663e\u793a\u6548\u679c","text":""},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85blackbox_exporter.html","title":"\u5b89\u88c5blackbox_exporter","text":"<p>Blackbox Exporter\u662fPrometheus\u793e\u533a\u63d0\u4f9b\u7684\u5b98\u65b9\u9ed1\u76d2\u76d1\u63a7\u89e3\u51b3\u65b9\u6848\uff0c\u5176\u5141\u8bb8\u7528\u6237\u901a\u8fc7\uff1aHTTP\u3001HTTPS\u3001DNS\u3001TCP\u4ee5\u53caICMP  \u7684\u65b9\u5f0f\u5bf9\u7f51\u7edc\u8fdb\u884c\u63a2\u6d4b\u3002\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u8fd9\u4e2aexporter\u5b9a\u65f6\u8bbf\u95ee\u4e1a\u52a1\u7cfb\u7edf\u67d0\u4e2a\u63a5\u53e3\u6765\u786e\u5b9a\u670d\u52a1\u662f\u5426\u5b58\u6d3b</p>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85blackbox_exporter.html#_1","title":"\u4e0b\u8f7d","text":"<pre><code>[root@VM-24-9-centos exporter_package]# wget https://ghproxy.com/https://github.com/prometheus/blackbox_exporter/releases/download/v0.23.0/blackbox_exporter-0.23.0.linux-amd64.tar.gz\n--2023-01-09 21:26:39--  https://ghproxy.com/https://github.com/prometheus/blackbox_exporter/releases/download/v0.23.0/blackbox_exporter-0.23.0.linux-amd64.tar.gz\nResolving ghproxy.com (ghproxy.com)... 141.147.152.25\nConnecting to ghproxy.com (ghproxy.com)|141.147.152.25|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 10831812 (10M) [application/octet-stream]\nSaving to: \u2018blackbox_exporter-0.23.0.linux-amd64.tar.gz\u2019\n\n100%[===========================================================================================================================================&gt;] 10,831,812  2.25MB/s   in 5.2s   \n\n2023-01-09 21:26:46 (1.97 MB/s) - \u2018blackbox_exporter-0.23.0.linux-amd64.tar.gz\u2019 saved [10831812/10831812]\n\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85blackbox_exporter.html#_2","title":"\u5b89\u88c5","text":"<pre><code># \u89e3\u538b\n[root@VM-24-9-centos exporter_package]# tar -zxvf blackbox_exporter-0.23.0.linux-amd64.tar.gz \nblackbox_exporter-0.23.0.linux-amd64/\nblackbox_exporter-0.23.0.linux-amd64/blackbox.yml\nblackbox_exporter-0.23.0.linux-amd64/LICENSE\nblackbox_exporter-0.23.0.linux-amd64/NOTICE\nblackbox_exporter-0.23.0.linux-amd64/blackbox_exporter\n\n# \u5907\u4efd\u914d\u7f6e\u6587\u4ef6\n[root@VM-24-9-centos exporter_package]# cd blackbox_exporter-0.23.0.linux-amd64/\n[root@VM-24-9-centos blackbox_exporter-0.23.0.linux-amd64]# ls\nblackbox_exporter  blackbox.yml  LICENSE  NOTICE\n[root@VM-24-9-centos blackbox_exporter-0.23.0.linux-amd64]# cp blackbox.yml blackbox.yml_init\n[root@VM-24-9-centos blackbox_exporter-0.23.0.linux-amd64]# ls\nblackbox_exporter  blackbox.yml  blackbox.yml_init  LICENSE  NOTICE\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85blackbox_exporter.html#blackbox_exporterdemo","title":"blackbox_exporter\u914d\u7f6e\u6587\u4ef6demo","text":"<pre><code>scrape_configs:\n  - job_name: 'blackbox'\n    metrics_path: /probe\n    params:\n      module: [http_2xx]  # \u52a0\u8f7d\u4e00\u4e2a\u6a21\u5757\u4e3ahttp_2xx\u7684\u6a21\u5757\uff0c\u8fd9\u4e2a\u6a21\u5757\u7528\u4e8e\u67e5\u770bhttp\u72b6\u6001\u4e3a200\u7684\u54cd\u5e94\n    static_configs:\n      - targets:\n        - http://prometheus.io    # \u76ee\u6807\u5730\u5740\u4e3ahttp\u534f\u8bae\n        - https://prometheus.io   # \u76ee\u6807\u5730\u5740\u4e3ahttps\u534f\u8bae\n        - http://example.com:8080 # \u76ee\u6807\u5730\u5740\u4e3ahttp\u534f\u8bae\u4e14\u7aef\u53e3\u4e3a8080\n    relabel_configs:\n      - source_labels: [__address__]\n        target_label: __param_target\n      - source_labels: [__param_target]\n        target_label: instance\n      - target_label: __address__\n        replacement: 127.0.0.1:9115  # The blackbox exporter's real hostname:port.\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85blackbox_exporter.html#black_exporter","title":"\u4fee\u6539black_exporter\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>[root@VM-24-9-centos blackbox_exporter-0.23.0.linux-amd64]# vi blackbox.yml\nmodules:\n  http_2xx:# \u8fd9\u4e2a\u540d\u5b57\u9700\u8981\u548cPrometheus\u4e2d\u7684params\u5bf9\u5e94\n    prober: http # \u63a2\u9488\u7c7b\u578b\uff1ahttp tcp  dns  icmp\n    timeout: 10s\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85blackbox_exporter.html#prometheusjob_name","title":"\u65b0\u589ePrometheus\u914d\u7f6e\u6587\u4ef6job_name","text":"<pre><code>  - job_name: \"blackbox_exporter\"\n    metrics_path: /probe # \u9ed8\u8ba4\u4e3a/probe\n    params:\n      module: [http_2xx] # \u52a0\u8f7d\u4e00\u4e2a\u6a21\u5757\u4e3ahttp_2xx\u7684\u6a21\u5757\uff0c\u8fd9\u4e2a\u6a21\u5757\u7528\u4e8e\u67e5\u770bhttp\u72b6\u6001\u4e3a200\u7684\u54cd\u5e94\n    static_configs:\n      - targets: # \u8981\u76d1\u63a7\u7684\u76ee\u6807\u5730\u5740\n        - http://www.baidu.com/\n        - http://prometheus.io\n    relabel_configs: # \u4ee5\u4e0b\u5185\u5bb9\u4e0d\u8981\u4fee\u6539\n      - source_labels: [__address__]\n        target_label: __param_target\n      - source_labels: [__address__]\n        target_label: instance\n      - target_label: __address__\n        replacement: localhost:9115 # \u8be5\u5730\u5740\u4e3ablackbox_exporter\u670d\u52a1\u7684ip\u53ca\u7aef\u53e3\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85blackbox_exporter.html#_3","title":"\u542f\u52a8","text":"<pre><code>[root@VM-24-9-centos exporter_package]# cd blackbox_exporter-0.23.0.linux-amd64/\n[root@VM-24-9-centos blackbox_exporter-0.23.0.linux-amd64]# ./blackbox_exporter --config.file=\"blackbox.yml\"\nts=2023-01-09T14:39:45.219Z caller=main.go:78 level=info msg=\"Starting blackbox_exporter\" version=\"(version=0.23.0, branch=HEAD, revision=26fc98b9c6db21457653ed752f34d1b7fb5bba43)\"\nts=2023-01-09T14:39:45.219Z caller=main.go:79 level=info build_context=\"(go=go1.19.3, user=root@f360719453e3, date=20221202-12:26:32)\"\nts=2023-01-09T14:39:45.220Z caller=main.go:91 level=info msg=\"Loaded config file\"\nts=2023-01-09T14:39:45.220Z caller=tls_config.go:232 level=info msg=\"Listening on\" address=[::]:9115\nts=2023-01-09T14:39:45.220Z caller=tls_config.go:235 level=info msg=\"TLS is disabled.\" http2=false address=[::]:9115\n\n# \u628ablackbox_exporter\u670d\u52a1\u6302\u5230\u540e\u53f0\nnohup ./blackbox_exporter --config.file=\"blackbox.yml\" &amp;\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E5%AE%89%E8%A3%85blackbox_exporter.html#_4","title":"\u663e\u793a\u6548\u679c","text":"<p>\u8fd9\u91cc\u6b63\u597d\u5bf9\u5e94\u4e0a\u9762\u65b0\u589e\u7684\u4e24\u4e2a\u76d1\u63a7\u76ee\u6807</p> <p></p> <p>\u5177\u4f53\u8bf7\u6c42\u7684\u7ed3\u679c\u53ef\u4ee5\u8bbf\u95ee http://ip:9155\u8bbf\u95ee</p>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E7%9B%91%E6%8E%A7docker%E5%AE%B9%E5%99%A8.html","title":"docker\u5b89\u88c5google/cadvisor","text":"<pre><code>[root@VM-24-9-centos ~]# docker pull google/cadvisor\nUsing default tag: latest\nlatest: Pulling from google/cadvisor\nff3a5c916c92: Pull complete \n44a45bb65cdf: Pull complete \n0bbe1a2fe2a6: Pull complete \nDigest: sha256:815386ebbe9a3490f38785ab11bda34ec8dacf4634af77b8912832d4f85dca04\nStatus: Downloaded newer image for google/cadvisor:latest\ndocker.io/google/cadvisor:latest\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E7%9B%91%E6%8E%A7docker%E5%AE%B9%E5%99%A8.html#cadvisor","title":"\u542f\u52a8cadvisor\u5bb9\u5668","text":"<pre><code>docker run -d \\\n--volume=/:/rootfs:ro \\\n--volume=/var/run:/var/run:rw \\\n--volume=/sys:/sys:ro \\\n--volume=/var/lib/docker/:/var/lib/docker:ro \\\n--publish=8080:8080 \\\n--detach=true \\\n--name=cadvisor \\\n-v \"/etc/localtime:/etc/localtime\" \\\ngoogle/cadvisor:latest\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E7%9B%91%E6%8E%A7docker%E5%AE%B9%E5%99%A8.html#cadvisor_1","title":"cadvisor\u9875\u9762\u5c55\u793a","text":"<p>\u8bbf\u95ee\u5730\u5740 http://ip:8080</p> <p></p>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E7%9B%91%E6%8E%A7docker%E5%AE%B9%E5%99%A8.html#prometheus","title":"\u6dfb\u52a0Prometheus\u5b50\u914d\u7f6e\u6587\u4ef6","text":"<pre><code># \u5b50\u914d\u7f6e\u6587\u4ef6\u540d\u79f0\u4e3adocker_exporter.yml\n- targets: ['localhost:58080']\n  labels:\n    env: 'test'\n    host: 'localhost'\n    type: 'docker_exporter'\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E7%9B%91%E6%8E%A7docker%E5%AE%B9%E5%99%A8.html#prometheusjob_name","title":"Prometheus\u914d\u7f6e\u6587\u4ef6\u65b0\u589ejob_name","text":"<pre><code>- job_name: \"docker_exporter\"\n    metrics_path: '/metrics'\n    scheme: 'http'\n    file_sd_configs:\n      # \u5b50\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\u9700\u8981\u6539\u4e3a\u81ea\u5df1\u7684\n      - files: [\"/usr/local/src/Prometheus_server/prometheus-2.41.0.linux-amd64/child_config/docker_exporter.yml\"]\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E7%9B%91%E6%8E%A7docker%E5%AE%B9%E5%99%A8.html#prometheus_1","title":"Prometheus \u663e\u793a\u6548\u679c","text":""},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E8%AE%BE%E7%BD%AEBasic_auth%E7%99%BB%E5%BD%95%E6%A0%A1%E9%AA%8C.html","title":"\u8bbe\u7f6eBasic_auth\u767b\u5f55\u6821\u9a8c","text":"<p>\u5bc6\u7801\u662f\u91c7\u7528bcrypt\u52a0\u5bc6</p>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E8%AE%BE%E7%BD%AEBasic_auth%E7%99%BB%E5%BD%95%E6%A0%A1%E9%AA%8C.html#webyml","title":"\u521b\u5efaweb.yml\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>basic_auth_users:\n    # \u5bc6\u7801\u751f\u6210\u5730\u5740:https://www.bejson.com/encrypt/bcrpyt_encode/\uff0c\u683c\u5f0f\u4e3a [ \u7528\u6237\u540d\uff1a\u5bc6\u7801 ]\n    admin: $2y$10$wUvMZwoFs4/PFTZAAysAGe.c5gSqU9.9DHinCtG3ec83e9fSeuoBi\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E8%AE%BE%E7%BD%AEBasic_auth%E7%99%BB%E5%BD%95%E6%A0%A1%E9%AA%8C.html#_1","title":"\u6821\u9a8c\u914d\u7f6e","text":"<pre><code>promtool.exe check web-config web.yml\n# \u51fa\u73b0\u4ee5\u4e0b\u5185\u5bb9\u5c31\u4ee3\u8868\u914d\u7f6e\u683c\u5f0f\u6b63\u786e\n# web.yml SUCCESS\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E8%AE%BE%E7%BD%AEBasic_auth%E7%99%BB%E5%BD%95%E6%A0%A1%E9%AA%8C.html#prometheus","title":"\u91cd\u542fPrometheus","text":"<pre><code>prometheus.exe --config.file=prometheus.yml --web.config.file=web.yml\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%AD%97%E6%AE%B5%E8%A7%A3%E6%9E%90.html","title":"\u5168\u5c40\u914d\u7f6e\u6ce8\u89e3","text":"<pre><code>global:\n  # \u9ed8\u8ba4\u60c5\u51b5\u6293\u53d6\u76ee\u6807\u7684\u9891\u7387\uff0c\u9ed8\u8ba41\u5206\u949f\n  [ scrape_interval: &lt;duration&gt; | default = 1m ]\n  # \u6293\u53d6\u8bf7\u6c42\u8d85\u65f6\u7684\u65f6\u95f4\uff0c\u9ed8\u8ba410S\n  [ scrape_timeout: &lt;duration&gt; | default = 10s ]\n  # \u8bc4\u4f30\u89c4\u5219\u7684\u9891\u7387\uff0c\u9ed8\u8ba41\u5206\u949f\n  [ evaluation_interval: &lt;duration&gt; | default = 1m ]\n  # \u5728\u4e0e\u8fdb\u884c\u901a\u4fe1\u65f6\u8981\u6dfb\u52a0\u5230\u4efb\u4f55\u65f6\u95f4\u5e8f\u5217\u6216\u8b66\u62a5\u7684\u6807\u7b7e\n  # \u5916\u90e8\u7cfb\u7edf\uff08federation\u3001\u8fdc\u7a0b\u3001storage\u3001Alertmanager\uff09\n  external_labels:\n    [ &lt;labelname&gt;: &lt;labelvalue&gt; ... ]\n  # PromQL\u67e5\u8be2\u8bb0\u5f55\u5230\u7684\u6587\u4ef6\u3002\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\u5c06\u91cd\u65b0\u6253\u5f00\u8be5\u6587\u4ef6\u3002\n  [ query_log_file: &lt;string&gt; ]\n# \u89c4\u5219\u6587\u4ef6\u6307\u5b9a\u5168\u5c40\u7684\u5217\u8868\u3002\u4ece\u4e2d\u8bfb\u53d6\u89c4\u5219\u548c\u8b66\u62a5\u3002\nrule_files:\n  [ - &lt;filepath_glob&gt; ... ]\n# \u6293\u53d6\u914d\u7f6e\u7684\u5217\u8868\nscrape_configs:\n  [ - &lt;scrape_config&gt; ... ]\n# \u8b66\u62a5\u6307\u5b9a\u4e0eAlertmanager\u76f8\u5173\u7684\u8bbe\u7f6e\nalerting:\n  alert_relabel_configs:\n    [ - &lt;relabel_config&gt; ... ]\n  alertmanagers:\n    [ - &lt;alertmanager_config&gt; ... ]\n\n# \u4e0e\u8fdc\u7a0b\u5199\u5165\u529f\u80fd\u76f8\u5173\u7684\u8bbe\u7f6e\nremote_write:\n  [ - &lt;remote_write&gt; ... ]\n# \u4e0e\u8fdc\u7a0b\u8bfb\u53d6\u529f\u80fd\u76f8\u5173\u7684\u8bbe\u7f6e\u3002\nremote_read:\n  [ - &lt;remote_read&gt; ... ]\n\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%AD%97%E6%AE%B5%E8%A7%A3%E6%9E%90.html#scrape_config","title":"Scrape_config\u914d\u7f6e\u6ce8\u89e3","text":"<pre><code># \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5206\u914d\u7ed9\u4e34\u65f6\u5ea6\u91cf\u7684\u4f5c\u4e1a\u540d\u79f0\u3002\njob_name: &lt;job_name&gt;\n# \u4ece\u8fd9\u9879\u5de5\u4f5c\u4e2d\u6293\u53d6\u76ee\u6807\u7684\u9891\u7387\u3002\n[ scrape_interval: &lt;duration&gt; | default = &lt;global_config.scrape_interval&gt; ]\n# \u6b64\u4f5c\u4e1a\u65f6\u7684\u6bcf\u6b21\u6293\u53d6\u8d85\u65f6\u65f6\u95f4\n[ scrape_timeout: &lt;duration&gt; | default = &lt;global_config.scrape_timeout&gt; ]\n# \u8981\u4ece\u76ee\u6807\u83b7\u53d6\u5ea6\u91cf\u7684HTTP\u8d44\u6e90\u8def\u5f84\n[ metrics_path: &lt;path&gt; | default = /metrics ]\n# honor_labels\u4e3b\u8981\u7528\u4e8e\u89e3\u51b3prometheus server\u7684label\u4e0eexporter\u7aef\u7528\u6237\u81ea\u5b9a\u4e49label\u51b2\u7a81\u7684\u95ee\u9898\u3002\n# \u4e3a\u201ctrue\u201d\uff0c\u5219\u901a\u8fc7\u4fdd\u7559\u6807\u7b7e\u6765\u89e3\u51b3\u6807\u7b7e\u51b2\u7a81\u503c\uff0c\u5e76\u5ffd\u7565\u51b2\u7a81\u7684\u670d\u52a1\u5668\u7aef\u6807\u7b7e\u3002\n# \u4e3a\u201cfalse\u201d\uff0c\u5219\u901a\u8fc7\u91cd\u547d\u540d\u89e3\u51b3\u6807\u7b7e\u51b2\u7a81\n[ honor_labels: &lt;boolean&gt; | default = false ]\n# \u5982\u679chonor_timestamps\u8bbe\u7f6e\u4e3a\u201ctrue\u201d\uff0c\u5219\u5c06\u663e\u793a\u5ea6\u91cf\u7684\u65f6\u95f4\u6233\u7531\u76ee\u6807\u5c06\u88ab\u4f7f\u7528\u3002\n# \u4e3a\u201cfalse\u201d\uff0c\u5219\u4f1a\u663e\u793a\u5ea6\u91cf\u7684\u65f6\u95f4\u6233\uff0c\u5c06\u5ffd\u7565\u7531\u76ee\u6807\u521b\u5efa\u7684\u3002\n[ honor_timestamps: &lt;boolean&gt; | default = true ]\n# \u914d\u7f6e\u7528\u4e8e\u8bf7\u6c42\u7684\u534f\u8bae\u65b9\u6848\u3002\n[ scheme: &lt;scheme&gt; | default = http ]\n# \u53ef\u9009\u7684HTTP URL\u53c2\u6570\nparams:\n  [ &lt;string&gt;: [&lt;string&gt;, ...] ]\n# \u4f7f\u7528\u914d\u7f6e\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u5bc6\u7801\u548c\u5bc6\u7801\u6587\u4ef6\u662f\u4e92\u65a5\u7684\u3002\nbasic_auth:\n  [ username: &lt;string&gt; ]\n  [ password: &lt;secret&gt; ]\n  [ password_file: &lt;string&gt; ]\n# \u4f7f\u7528\u8bbe\u7f6e\u6bcf\u4e2a\u522e\u53d6\u8bf7\u6c42\u7684\u201cAuthorization\u201d\u6807\u5934\u4e3a\u914d\u7f6e\u7684\u51ed\u636e\u3002\nauthorization:\n  # \u8bbe\u7f6e\u8bf7\u6c42\u7684\u8bf7\u6c42\u5934\u8eab\u4efd\u9a8c\u8bc1\u7c7b\u578b\u3002\n  [ type: &lt;string&gt; | default: Bearer ]\n  # \u8bbe\u7f6e\u8bf7\u6c42\u7684\u51ed\u636e\u3002\u8fd9\u662f\u548ccredentials_file\u76f8\u4e92\u6392\u65a5\u7684\n  [ credentials: &lt;secret&gt; ]\n  # \u4f7f\u7528\u4ece\u4e2d\u8bfb\u53d6\u7684\u51ed\u636e\u8bbe\u7f6e\u8bf7\u6c42\u7684\u51ed\u636e\n  [ credentials_file: &lt;filename&gt; ]\n# \u53ef\u9009\u7684OAuth 2.0\u914d\u7f6e\u3002\u4e0d\u80fd\u4e0e\u57fa\u672c\u6388\u6743\u6216\u6388\u6743\u540c\u65f6\u4f7f\u7528\u3002\noauth2:\n  [ &lt;oauth2&gt; ]\n# \u914d\u7f6e\u6293\u53d6\u8bf7\u6c42\u662f\u5426\u9075\u5faaHTTP 3xx\u91cd\u5b9a\u5411\u3002\n[ follow_redirects: &lt;bool&gt; | default = true ]\n# \u914d\u7f6e\u8bf7\u6c42\u7684TLS\u8bbe\u7f6e\u3002\ntls_config:\n  [ &lt;tls_config&gt; ]\n# \u53ef\u9009\u7684\u4ee3\u7406URL\n[ proxy_url: &lt;string&gt; ]\n# \nazure_sd_configs:\n  [ - &lt;azure_sd_config&gt; ... ]\n# consul\u670d\u52a1\u53d1\u73b0\u914d\u7f6e\u7684\u5217\u8868\u3002\nconsul_sd_configs:\n  [ - &lt;consul_sd_config&gt; ... ]\n# digitalocean\u670d\u52a1\u53d1\u73b0\u914d\u7f6e\u7684\u5217\u8868\u3002\ndigitalocean_sd_configs:\n  [ - &lt;digitalocean_sd_config&gt; ... ]\n# docker\u670d\u52a1\u53d1\u73b0\u914d\u7f6e\u7684\u5217\u8868\u3002\ndocker_sd_configs:\n  [ - &lt;docker_sd_config&gt; ... ]\n# dockerswarm\u670d\u52a1\u53d1\u73b0\u914d\u7f6e\u7684\u5217\u8868\u3002\ndockerswarm_sd_configs:\n  [ - &lt;dockerswarm_sd_config&gt; ... ]\n# dns \u670d\u52a1\u53d1\u73b0\u914d\u7f6e\u7684\u5217\u8868\u3002\ndns_sd_configs:\n  [ - &lt;dns_sd_config&gt; ... ]\n# ec2 \u670d\u52a1\u53d1\u73b0\u914d\u7f6e\u7684\u5217\u8868\u3002\nec2_sd_configs:\n  [ - &lt;ec2_sd_config&gt; ... ]\n# eureka \u670d\u52a1\u53d1\u73b0\u914d\u7f6e\u7684\u5217\u8868\u3002\neureka_sd_configs:\n  [ - &lt;eureka_sd_config&gt; ... ]\n# eureka \u670d\u52a1\u53d1\u73b0\u914d\u7f6e\u7684\u5217\u8868\u3002\nfile_sd_configs:\n  [ - &lt;file_sd_config&gt; ... ]\n\n# eureka \u670d\u52a1\u53d1\u73b0\u914d\u7f6e\u7684\u5217\u8868\u3002\ngce_sd_configs:\n  [ - &lt;gce_sd_config&gt; ... ]\n\n# List of Hetzner service discovery configurations.\nhetzner_sd_configs:\n  [ - &lt;hetzner_sd_config&gt; ... ]\n\n# List of HTTP service discovery configurations.\nhttp_sd_configs:\n  [ - &lt;http_sd_config&gt; ... ]\n\n# List of Kubernetes service discovery configurations.\nkubernetes_sd_configs:\n  [ - &lt;kubernetes_sd_config&gt; ... ]\n\n# List of Kuma service discovery configurations.\nkuma_sd_configs:\n  [ - &lt;kuma_sd_config&gt; ... ]\n# \u7701\u7565\u5176\u4ed6\u670d\u52a1\u53d1\u73b0\u3002\u3002\u3002\u3002\n# \u6b64\u4f5c\u4e1a\u7684\u6807\u8bb0\u9759\u6001\u914d\u7f6e\u76ee\u6807\u5217\u8868\u3002\nstatic_configs:\n  [ - &lt;static_config&gt; ... ]\n# \u76ee\u6807\u91cd\u65b0\u6807\u8bb0\u914d\u7f6e\u7684\u5217\u8868\u3002\nrelabel_configs:\n  [ - &lt;relabel_config&gt; ... ]\n# \u516c\u5236\u91cd\u65b0\u6807\u8bb0\u914d\u7f6e\u7684\u5217\u8868\u3002\nmetric_relabel_configs:\n  [ - &lt;relabel_config&gt; ... ]\n# \u5982\u679c\u672a\u538b\u7f29\u7684\u54cd\u5e94\u6b63\u6587\u5927\u4e8e\u8fd9\u4e48\u591a\u5b57\u8282\uff0c\u5219\u4f1a\u5bfc\u81f4,\u52c9\u5f3a\u5931\u8d25\u30020\u8868\u793a\u6ca1\u6709\u9650\u5236\u3002\u4f8b\u5982\uff1a100MB\u3002\n# \u8fd9\u662f\u4e00\u4e2a\u5b9e\u9a8c\u7279\u6027\uff0c\u8fd9\u79cd\u884c\u4e3a\u53ef\u80fd\u5728\u5c06\u6765\u66f4\u6539\u6216\u5220\u9664\u3002\n[ body_size_limit: &lt;size&gt; | default = 0 ]\n# \u6bcf\u4e2a\u6293\u53d6\u9650\u5236\u5c06\u88ab\u63a5\u53d7\u7684\u522e\u53d6\u6837\u54c1\u6570\u91cf\u3002\n#\u5982\u679c\u5728\u516c\u5236\u91cd\u65b0\u6807\u8bb0\u540e\u5b58\u5728\u8d85\u8fc7\u6b64\u6570\u91cf\u7684\u6837\u672c\n#\u6574\u4e2a\u6293\u53d6\u5c06\u88ab\u89c6\u4e3a\u5931\u8d25\u30020\u8868\u793a\u6ca1\u6709\u9650\u5236\u3002\n[ sample_limit: &lt;int&gt; | default = 0 ]\n# \u6bcf\u6293\u53d6\u4e00\u6b21\u53ef\u63a5\u53d7\u7684\u6807\u7b7e\u6570\u91cf\u9650\u5236\u3002\u5982\u679c\u8d85\u8fc7\u8fd9\u4e2a\u6570\u91cf\u7684\u6807\u7b7e\u5728\u5ea6\u91cf\u91cd\u65b0\u6807\u8bb0\u540e\u51fa\u73b0\u3002\u6574\u4e2a\u5c06\u88ab\u89c6\u4e3a\u5931\u8d25\u30020\u8868\u793a\u6ca1\u6709\u9650\u5236\u3002\n[ label_limit: &lt;int&gt; | default = 0 ]\n# \u6837\u672c\u53ef\u63a5\u53d7\u7684\u6807\u7b7e\u540d\u79f0\u957f\u5ea6\u7684\u6bcf\u6293\u53d6\u9650\u5236\u3002\u5982\u679c\u6807\u7b7e\u540d\u79f0\u957f\u4e8e\u6b64\u6570\u5b57\uff0c\u5219\u5728\u91cd\u65b0\u6807\u8bb0\u5ea6\u91cf\u540e\uff0c\u6574\u4e2a\u5c06\u88ab\u89c6\u4e3a\u5931\u8d25\u30020\u8868\u793a\u6ca1\u6709\u9650\u5236\u3002\n[ label_name_length_limit: &lt;int&gt; | default = 0 ]\n# \u6807\u7b7e\u957f\u5ea6\u7684\u6bcf\u6b21\u6293\u53d6\u9650\u5236\u503c\uff0c\u8be5\u503c\u5c06\u88ab\u6837\u672c\u63a5\u53d7\u3002\n[ label_value_length_limit: &lt;int&gt; | default = 0 ]\n# \u6bcf\u4e2a\u6293\u53d6\u914d\u7f6e\u5bf9\u5c06\u88ab\u5220\u9664\u7684\u552f\u4e00\u76ee\u6807\u6570\u7684\u9650\u5236\u63a5\u53d7\u3002\u5982\u679c\u76ee\u6807\u540e\u5b58\u5728\u7684\u76ee\u6807\u6570\u91cf\u8d85\u8fc7\u6b64\u6570\u91cf\n#\u91cd\u65b0\u6807\u8bb0\u540e\uff0c\u666e\u7f57\u7c73\u4fee\u65af\u5c06\u5728\u4e0d\u6e05\u9664\u76ee\u6807\u7684\u60c5\u51b5\u4e0b\u5c06\u76ee\u6807\u6807\u8bb0\u4e3a\u5931\u8d25\u30020\u8868\u793a\u6ca1\u6709\u9650\u5236\u3002\n[ target_limit: &lt;int&gt; | default = 0 \n\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%AD%97%E6%AE%B5%E8%A7%A3%E6%9E%90.html#_2","title":"\u544a\u8b66\u914d\u7f6e\u6ce8\u89e3","text":"<pre><code># \u63a8\u9001\u8b66\u62a5\u65f6\u6bcf\u4e2a\u76ee\u6807Alertmanager\u8d85\u65f6\u65f6\u95f4\n[ timeout: &lt;duration&gt; | default = 10s ]\n# Alertmanager\u7684api\u7248\u672c\n[ api_version: &lt;string&gt; | default = v2 ]\n# \u88ab\u63a8\u9001HTTP\u8def\u5f84\u8b66\u62a5\u7684\u524d\u7f00\n[ path_prefix: &lt;path&gt; | default = / ]\n# \u914d\u7f6e\u7528\u4e8e\u8bf7\u6c42\u7684\u534f\u8bae\u65b9\u6848\u3002\n[ scheme: &lt;scheme&gt; | default = http ]\n# \u914d\u7f6e\u8ba4\u8bc1\u4fe1\u606f\nbasic_auth:\n  [ username: &lt;string&gt; ]\n  [ password: &lt;secret&gt; ]\n  [ password_file: &lt;string&gt; ]\nauthorization:\n  [ type: &lt;string&gt; | default: Bearer ]\n  [ credentials: &lt;secret&gt; ]\n  [ credentials_file: &lt;filename&gt; ]\noauth2:\n  [ &lt;oauth2&gt; ]\ntls_config:\n  [ &lt;tls_config&gt; ]\n[ proxy_url: &lt;string&gt; ]\n[ follow_redirects: &lt;bool&gt; | default = true ]\n# List of Azure service discovery configurations.\nazure_sd_configs:\n  [ - &lt;azure_sd_config&gt; ... ]\n# \u7701\u7565\u5176\u4ed6\u670d\u52a1\u53d1\u73b0\u914d\u7f6e\n# Alertmanagers\u7684static_config\u96c6\u5408\nstatic_configs:\n  [ - &lt;static_config&gt; ... ]\n# Alertmanager  \u7684relabel_configs\u914d\u7f6e\u96c6\u5408\nrelabel_configs:\n  [ - &lt;relabel_config&gt; ... ]\n</code></pre>"},{"location":"Linux/Prometheus/Prometheus%E7%AC%94%E8%AE%B0-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%AD%97%E6%AE%B5%E8%A7%A3%E6%9E%90.html#_3","title":"\u9759\u6001\u914d\u7f6e\u6ce8\u89e3","text":"<pre><code># \u76ee\u6807\u7684\u4e3b\u673a\u5730\u5740\ntargets:\n  [ - '&lt;host&gt;' ]\n# \u5206\u914d\u7ed9\u4ece\u76ee\u6807\u4e2d\u6293\u53d6\u7684\u6240\u6709\u5ea6\u91cf\u7684\u6807\u7b7e\nlabels:\n  [ &lt;labelname&gt;: &lt;labelvalue&gt; ... ]\n</code></pre>"},{"location":"Linux/monitor/Uptime-kuma%20%E7%9B%91%E6%8E%A7.html","title":"Uptime-kuma\u76d1\u63a7","text":"<p>\u7b80\u4ecb</p> <ul> <li>\u76d1\u63a7 HTTP\uff08s\uff09 / TCP / HTTP\uff08s\uff09 \u5173\u952e\u5b57 / HTTP\uff08s\uff09 Json \u67e5\u8be2 / Ping / DNS \u8bb0\u5f55 / \u63a8\u9001 / Steam \u6e38\u620f\u670d\u52a1\u5668 / Docker \u5bb9\u5668\u7684\u6b63\u5e38\u8fd0\u884c\u65f6\u95f4</li> <li>\u901a\u8fc7 Telegram\u3001Discord\u3001Gotify\u3001Slack\u3001Pushover\u3001\u7535\u5b50\u90ae\u4ef6 \uff08SMTP\uff09 \u548c 90+ \u901a\u77e5\u670d\u52a1\u53d1\u9001\u901a\u77e5</li> </ul>"},{"location":"Linux/monitor/Uptime-kuma%20%E7%9B%91%E6%8E%A7.html#_1","title":"\u51c6\u5907\u5de5\u4f5c","text":"<ul> <li>Centos 7</li> <li>docker-ce</li> </ul>"},{"location":"Linux/monitor/Uptime-kuma%20%E7%9B%91%E6%8E%A7.html#_2","title":"\u5b89\u88c5","text":"<pre><code>docker pull louislam/uptime-kuma:1\ndocker run -d --restart=always -p 3001:3001 -v uptime-kuma:/app/data --name uptime-kuma louislam/uptime-kuma:1\n</code></pre>"},{"location":"Linux/monitor/Uptime-kuma%20%E7%9B%91%E6%8E%A7.html#_3","title":"\u914d\u7f6e","text":"<p>\u8bbf\u95ee http://ip:3001</p>"},{"location":"Linux/monitor/Uptime-kuma%20%E7%9B%91%E6%8E%A7.html#_4","title":"\u57fa\u7840\u914d\u7f6e","text":""},{"location":"Linux/monitor/Uptime-kuma%20%E7%9B%91%E6%8E%A7.html#_5","title":"\u76d1\u63a7\u8be6\u60c5\u9875\u9762","text":""},{"location":"Linux/monitor/Uptime-kuma%20%E7%9B%91%E6%8E%A7.html#_6","title":"\u76d1\u63a7\u9879\u72b6\u6001\u9875\u9762","text":""},{"location":"Linux/monitor/Uptime-kuma%20%E7%9B%91%E6%8E%A7.html#_7","title":"\u914d\u7f6e\u7ef4\u62a4\u4fe1\u606f","text":"<p>\u53f3\u4e0a\u89d2<code>\u6211\u7684</code>-&gt;<code>\u7ef4\u62a4</code></p> <p></p> <p></p>"},{"location":"Linux/monitor/%E5%9F%BA%E4%BA%8EGrafana%2BLoki%2BPromatil%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0.html","title":"\u57fa\u4e8eGrafana+Loki+Promatil\u642d\u5efa\u65e5\u5fd7\u5206\u6790\u5e73\u53f0","text":""},{"location":"Linux/monitor/%E5%9F%BA%E4%BA%8EGrafana%2BLoki%2BPromatil%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0.html#_1","title":"\u7b80\u4ecb","text":"<p>\u80cc\u666f:</p> <p>\u6709\u5f88\u591a\u5382\u5546\u90fd\u7528ELK(Elasticsearch+Logstash+Kibana)\u8fdb\u884c\u65e5\u5fd7\u5206\u6790,ELK\u7684\u7528\u6237\u4f53\u9a8c\u786e\u5b9e\u5f88\u597d,\u540c\u65f6\u5bf9\u4e8e\u670d\u52a1\u5668\u7684\u914d\u7f6e\u8981\u6c42\u4e5f\u4e0d\u4f4e,\u5982\u679c\u516c\u53f8\u7684\u9879\u76ee\u89c4\u6a21\u4e0d\u662f\u5f88\u5927,\u53ef\u4ee5\u8003\u8651\u8003\u8651\u7528GLP(Grafana+Loki+Promatil),GLP\u5bf9\u670d\u52a1\u5668\u7684\u8981\u6c42\u6ca1\u6709ELK\u90a3\u4e48\u9ad8,\u540c\u65f6\u5b83\u90e8\u7f72\u8d77\u6765\u4e5f\u6bd4ELK\u65b9\u4fbf</p> <p>ELK\u4e0eLoki\u7684\u4f18\u7f3a\u70b9(\u53c2\u8003https://blog.csdn.net/gjjhyd/article/details/113624596):</p> <p></p> <p>\u65e5\u5fd7\u5206\u6790\u5e73\u53f0\u7ec4\u6210\u90e8\u5206:</p> <p>Grafana: \u7528\u4e8e\u65e5\u5fd7\u7684\u9875\u9762\u5c55\u793a</p> <p>Loki: \u670d\u52a1\u7aef,\u8d1f\u8d23\u5b58\u50a8\u6536\u96c6\u5230\u7684\u65e5\u5fd7,\u540c\u65f6\u8fd8\u8d1f\u8d23\u5904\u7406\u65e5\u5fd7\u7684\u67e5\u8be2</p> <p>Promatil: \u4ee3\u7406,\u8d1f\u8d23\u6536\u96c6\u65e5\u5fd7\u5e76\u5c06\u6536\u96c6\u5230\u7684\u65e5\u5fd7\u53d1\u9001\u5230Loki</p>"},{"location":"Linux/monitor/%E5%9F%BA%E4%BA%8EGrafana%2BLoki%2BPromatil%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0.html#_2","title":"\u73af\u5883\u51c6\u5907","text":"<p>\u817e\u8baf\u4e91\u670d\u52a1\u5668: centos 7</p>"},{"location":"Linux/monitor/%E5%9F%BA%E4%BA%8EGrafana%2BLoki%2BPromatil%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0.html#grafana","title":"Grafana\u5b89\u88c5","text":"<p>\u5b98\u65b9\u4e0b\u8f7d\u5730\u5740:https://dl.grafana.com/oss/release/grafana-8.4.0-1.x86_64.rpm</p> <p>:book:\u53c2\u8003\u5b98\u65b9\u6587\u6863:https://grafana.com/docs/grafana/latest/installation/rpm/</p>"},{"location":"Linux/monitor/%E5%9F%BA%E4%BA%8EGrafana%2BLoki%2BPromatil%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0.html#_3","title":"\u5b89\u88c5\u6b65\u9aa4","text":""},{"location":"Linux/monitor/%E5%9F%BA%E4%BA%8EGrafana%2BLoki%2BPromatil%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0.html#1","title":"\u65b9\u68481(\u63a8\u8350):","text":"<p>\u65b0\u5efa\u914d\u7f6e(\u817e\u8baf\u6e90) \u53c2\u8003:https://mirrors.cloud.tencent.com/help/grafana.html</p> <pre><code>vi /etc/yum.repos.d/grafana.repo\n# \u5185\u5bb9\n[grafana]\nname=grafana\nbaseurl=http://mirrors.cloud.tencent.com/grafana/yum/el7\nrepo_gpgcheck=0\ngpgcheck=0\nenabled=1\n</code></pre> <p>\u5b89\u88c5grafana</p> <pre><code># \u6267\u884c\u5b89\u88c5\nsudo yum makecache\nsudo yum install grafana\n\n# \u6267\u884c\u7ed3\u679c\n[root@VM-24-9-centos src]# yum install grafana\nLoaded plugins: fastestmirror, langpacks\nLoading mirror speeds from cached hostfile\nResolving Dependencies\n--&gt; Running transaction check\n---&gt; Package grafana.x86_64 0:5.4.2-1 will be installed\n--&gt; Processing Dependency: urw-fonts for package: grafana-5.4.2-1.x86_64\n--&gt; Running transaction check\n---&gt; Package urw-base35-fonts.noarch 0:20170801-10.el7 will be installed\n--&gt; Processing Dependency: urw-base35-fonts-common = 20170801-10.el7 for package: urw-base35-fonts-20170801-10.el7.noarch\n--&gt; Processing Dependency: urw-base35-z003-fonts for package: urw-base35-fonts-20170801-10.el7.noarch\n--&gt; Processing Dependency: urw-base35-standard-symbols-ps-fonts for package: urw-base35-fonts-20170801-10.el7.noarch\n--&gt; Processing Dependency: urw-base35-p052-fonts for package: urw-base35-fonts-20170801-10.el7.noarch\n--&gt; Processing Dependency: urw-base35-nimbus-sans-fonts for package: urw-base35-fonts-20170801-10.el7.noarch\n--&gt; Processing Dependency: urw-base35-nimbus-roman-fonts for package: urw-base35-fonts-20170801-10.el7.noarch\n--&gt; Processing Dependency: urw-base35-nimbus-mono-ps-fonts for package: urw-base35-fonts-20170801-10.el7.noarch\n--&gt; Processing Dependency: urw-base35-gothic-fonts for package: urw-base35-fonts-20170801-10.el7.noarch\n--&gt; Processing Dependency: urw-base35-d050000l-fonts for package: urw-base35-fonts-20170801-10.el7.noarch\n--&gt; Processing Dependency: urw-base35-c059-fonts for package: urw-base35-fonts-20170801-10.el7.noarch\n--&gt; Processing Dependency: urw-base35-bookman-fonts for package: urw-base35-fonts-20170801-10.el7.noarch\n--&gt; Running transaction check\n---&gt; Package urw-base35-bookman-fonts.noarch 0:20170801-10.el7 will be installed\n--&gt; Processing Dependency: xorg-x11-server-utils for package: urw-base35-bookman-fonts-20170801-10.el7.noarch\n--&gt; Processing Dependency: xorg-x11-server-utils for package: urw-base35-bookman-fonts-20170801-10.el7.noarch\n--&gt; Processing Dependency: xorg-x11-font-utils for package: urw-base35-bookman-fonts-20170801-10.el7.noarch\n--&gt; Processing Dependency: xorg-x11-font-utils for package: urw-base35-bookman-fonts-20170801-10.el7.noarch\n---&gt; Package urw-base35-c059-fonts.noarch 0:20170801-10.el7 will be installed\n---&gt; Package urw-base35-d050000l-fonts.noarch 0:20170801-10.el7 will be installed\n---&gt; Package urw-base35-fonts-common.noarch 0:20170801-10.el7 will be installed\n---&gt; Package urw-base35-gothic-fonts.noarch 0:20170801-10.el7 will be installed\n---&gt; Package urw-base35-nimbus-mono-ps-fonts.noarch 0:20170801-10.el7 will be installed\n---&gt; Package urw-base35-nimbus-roman-fonts.noarch 0:20170801-10.el7 will be installed\n---&gt; Package urw-base35-nimbus-sans-fonts.noarch 0:20170801-10.el7 will be installed\n---&gt; Package urw-base35-p052-fonts.noarch 0:20170801-10.el7 will be installed\n---&gt; Package urw-base35-standard-symbols-ps-fonts.noarch 0:20170801-10.el7 will be installed\n---&gt; Package urw-base35-z003-fonts.noarch 0:20170801-10.el7 will be installed\n--&gt; Running transaction check\n---&gt; Package xorg-x11-font-utils.x86_64 1:7.5-21.el7 will be installed\n--&gt; Processing Dependency: libfontenc.so.1()(64bit) for package: 1:xorg-x11-font-utils-7.5-21.el7.x86_64\n---&gt; Package xorg-x11-server-utils.x86_64 0:7.7-20.el7 will be installed\n--&gt; Processing Dependency: libXxf86misc.so.1()(64bit) for package: xorg-x11-server-utils-7.7-20.el7.x86_64\n--&gt; Processing Dependency: libXt.so.6()(64bit) for package: xorg-x11-server-utils-7.7-20.el7.x86_64\n--&gt; Processing Dependency: libXmuu.so.1()(64bit) for package: xorg-x11-server-utils-7.7-20.el7.x86_64\n--&gt; Processing Dependency: libXmu.so.6()(64bit) for package: xorg-x11-server-utils-7.7-20.el7.x86_64\n--&gt; Processing Dependency: libICE.so.6()(64bit) for package: xorg-x11-server-utils-7.7-20.el7.x86_64\n--&gt; Running transaction check\n---&gt; Package libICE.x86_64 0:1.0.9-9.el7 will be installed\n---&gt; Package libXmu.x86_64 0:1.1.2-2.el7 will be installed\n---&gt; Package libXt.x86_64 0:1.1.5-3.el7 will be installed\n--&gt; Processing Dependency: libSM.so.6()(64bit) for package: libXt-1.1.5-3.el7.x86_64\n---&gt; Package libXxf86misc.x86_64 0:1.0.3-7.1.el7 will be installed\n---&gt; Package libfontenc.x86_64 0:1.1.3-3.el7 will be installed\n--&gt; Running transaction check\n---&gt; Package libSM.x86_64 0:1.2.2-2.el7 will be installed\n--&gt; Finished Dependency Resolution\n\nDependencies Resolved\n\n====================================================================================================\n Package                                    Arch         Version                Repository     Size\n====================================================================================================\nInstalling:\n grafana                                    x86_64       5.4.2-1                grafana        52 M\nInstalling for dependencies:\n libICE                                     x86_64       1.0.9-9.el7            os             66 k\n libSM                                      x86_64       1.2.2-2.el7            os             39 k\n libXmu                                     x86_64       1.1.2-2.el7            os             71 k\n libXt                                      x86_64       1.1.5-3.el7            os            173 k\n libXxf86misc                               x86_64       1.0.3-7.1.el7          os             19 k\n libfontenc                                 x86_64       1.1.3-3.el7            os             31 k\n urw-base35-bookman-fonts                   noarch       20170801-10.el7        os            852 k\n urw-base35-c059-fonts                      noarch       20170801-10.el7        os            879 k\n urw-base35-d050000l-fonts                  noarch       20170801-10.el7        os             75 k\n urw-base35-fonts                           noarch       20170801-10.el7        os            7.6 k\n urw-base35-fonts-common                    noarch       20170801-10.el7        os             19 k\n urw-base35-gothic-fonts                    noarch       20170801-10.el7        os            650 k\n urw-base35-nimbus-mono-ps-fonts            noarch       20170801-10.el7        os            796 k\n urw-base35-nimbus-roman-fonts              noarch       20170801-10.el7        os            860 k\n urw-base35-nimbus-sans-fonts               noarch       20170801-10.el7        os            1.3 M\n urw-base35-p052-fonts                      noarch       20170801-10.el7        os            978 k\n urw-base35-standard-symbols-ps-fonts       noarch       20170801-10.el7        os             40 k\n urw-base35-z003-fonts                      noarch       20170801-10.el7        os            275 k\n xorg-x11-font-utils                        x86_64       1:7.5-21.el7           os            104 k\n xorg-x11-server-utils                      x86_64       7.7-20.el7             os            178 k\n\nTransaction Summary\n====================================================================================================\nInstall  1 Package (+20 Dependent packages)\n\nTotal download size: 60 M\nInstalled size: 65 M\nIs this ok [y/d/N]: y\nDownloading packages:\n(1/21): libICE-1.0.9-9.el7.x86_64.rpm                                        |  66 kB  00:00:00     \n(2/21): libSM-1.2.2-2.el7.x86_64.rpm                                         |  39 kB  00:00:00     \n(3/21): libXmu-1.1.2-2.el7.x86_64.rpm                                        |  71 kB  00:00:00     \n(4/21): libXt-1.1.5-3.el7.x86_64.rpm                                         | 173 kB  00:00:00     \n(5/21): libXxf86misc-1.0.3-7.1.el7.x86_64.rpm                                |  19 kB  00:00:00     \n(6/21): libfontenc-1.1.3-3.el7.x86_64.rpm                                    |  31 kB  00:00:00     \n(7/21): urw-base35-bookman-fonts-20170801-10.el7.noarch.rpm                  | 852 kB  00:00:00     \n(8/21): urw-base35-d050000l-fonts-20170801-10.el7.noarch.rpm                 |  75 kB  00:00:00     \n(9/21): urw-base35-fonts-20170801-10.el7.noarch.rpm                          | 7.6 kB  00:00:00     \n(10/21): urw-base35-c059-fonts-20170801-10.el7.noarch.rpm                    | 879 kB  00:00:00     \n(11/21): urw-base35-fonts-common-20170801-10.el7.noarch.rpm                  |  19 kB  00:00:00     \n(12/21): urw-base35-nimbus-mono-ps-fonts-20170801-10.el7.noarch.rpm          | 796 kB  00:00:00     \n(13/21): urw-base35-gothic-fonts-20170801-10.el7.noarch.rpm                  | 650 kB  00:00:00     \n(14/21): urw-base35-nimbus-roman-fonts-20170801-10.el7.noarch.rpm            | 860 kB  00:00:00     \n(15/21): urw-base35-p052-fonts-20170801-10.el7.noarch.rpm                    | 978 kB  00:00:00     \n(16/21): urw-base35-standard-symbols-ps-fonts-20170801-10.el7.noarch.rpm     |  40 kB  00:00:00     \n(17/21): urw-base35-nimbus-sans-fonts-20170801-10.el7.noarch.rpm             | 1.3 MB  00:00:00     \n(18/21): urw-base35-z003-fonts-20170801-10.el7.noarch.rpm                    | 275 kB  00:00:00     \n(19/21): xorg-x11-server-utils-7.7-20.el7.x86_64.rpm                         | 178 kB  00:00:00     \n(20/21): xorg-x11-font-utils-7.5-21.el7.x86_64.rpm                           | 104 kB  00:00:00     \n(21/21): grafana-5.4.2-1.x86_64.rpm                                          |  52 MB  00:00:43     \n----------------------------------------------------------------------------------------------------\nTotal                                                               1.4 MB/s |  60 MB  00:00:43     \nRunning transaction check\nRunning transaction test\nTransaction test succeeded\nRunning transaction\n  Installing : urw-base35-fonts-common-20170801-10.el7.noarch                                  1/21 \n  Installing : libICE-1.0.9-9.el7.x86_64                                                       2/21 \n  Installing : libSM-1.2.2-2.el7.x86_64                                                        3/21 \n  Installing : libXt-1.1.5-3.el7.x86_64                                                        4/21 \n  Installing : libXmu-1.1.2-2.el7.x86_64                                                       5/21 \n  Installing : libfontenc-1.1.3-3.el7.x86_64                                                   6/21 \n  Installing : 1:xorg-x11-font-utils-7.5-21.el7.x86_64                                         7/21 \n  Installing : libXxf86misc-1.0.3-7.1.el7.x86_64                                               8/21 \n  Installing : xorg-x11-server-utils-7.7-20.el7.x86_64                                         9/21 \n  Installing : urw-base35-c059-fonts-20170801-10.el7.noarch                                   10/21 \n  Installing : urw-base35-z003-fonts-20170801-10.el7.noarch                                   11/21 \n  Installing : urw-base35-nimbus-mono-ps-fonts-20170801-10.el7.noarch                         12/21 \n  Installing : urw-base35-d050000l-fonts-20170801-10.el7.noarch                               13/21 \n  Installing : urw-base35-p052-fonts-20170801-10.el7.noarch                                   14/21 \n  Installing : urw-base35-nimbus-roman-fonts-20170801-10.el7.noarch                           15/21 \n  Installing : urw-base35-standard-symbols-ps-fonts-20170801-10.el7.noarch                    16/21 \n  Installing : urw-base35-bookman-fonts-20170801-10.el7.noarch                                17/21 \n  Installing : urw-base35-nimbus-sans-fonts-20170801-10.el7.noarch                            18/21 \n  Installing : urw-base35-gothic-fonts-20170801-10.el7.noarch                                 19/21 \n  Installing : urw-base35-fonts-20170801-10.el7.noarch                                        20/21 \n  Installing : grafana-5.4.2-1.x86_64                                                         21/21 \n### NOT starting on installation, please execute the following statements to configure grafana to start automatically using systemd\n sudo /bin/systemctl daemon-reload\n sudo /bin/systemctl enable grafana-server.service\n### You can start grafana-server by executing\n sudo /bin/systemctl start grafana-server.service\nPOSTTRANS: Running script\n  Verifying  : urw-base35-fonts-20170801-10.el7.noarch                                         1/21 \n  Verifying  : grafana-5.4.2-1.x86_64                                                          2/21 \n  Verifying  : libXmu-1.1.2-2.el7.x86_64                                                       3/21 \n  Verifying  : urw-base35-c059-fonts-20170801-10.el7.noarch                                    4/21 \n  Verifying  : libSM-1.2.2-2.el7.x86_64                                                        5/21 \n  Verifying  : urw-base35-z003-fonts-20170801-10.el7.noarch                                    6/21 \n  Verifying  : urw-base35-nimbus-mono-ps-fonts-20170801-10.el7.noarch                          7/21 \n  Verifying  : urw-base35-d050000l-fonts-20170801-10.el7.noarch                                8/21 \n  Verifying  : libXt-1.1.5-3.el7.x86_64                                                        9/21 \n  Verifying  : urw-base35-p052-fonts-20170801-10.el7.noarch                                   10/21 \n  Verifying  : urw-base35-nimbus-roman-fonts-20170801-10.el7.noarch                           11/21 \n  Verifying  : 1:xorg-x11-font-utils-7.5-21.el7.x86_64                                        12/21 \n  Verifying  : urw-base35-standard-symbols-ps-fonts-20170801-10.el7.noarch                    13/21 \n  Verifying  : urw-base35-bookman-fonts-20170801-10.el7.noarch                                14/21 \n  Verifying  : libICE-1.0.9-9.el7.x86_64                                                      15/21 \n  Verifying  : libXxf86misc-1.0.3-7.1.el7.x86_64                                              16/21 \n  Verifying  : libfontenc-1.1.3-3.el7.x86_64                                                  17/21 \n  Verifying  : xorg-x11-server-utils-7.7-20.el7.x86_64                                        18/21 \n  Verifying  : urw-base35-fonts-common-20170801-10.el7.noarch                                 19/21 \n  Verifying  : urw-base35-nimbus-sans-fonts-20170801-10.el7.noarch                            20/21 \n  Verifying  : urw-base35-gothic-fonts-20170801-10.el7.noarch                                 21/21 \n\nInstalled:\n  grafana.x86_64 0:5.4.2-1                                                                          \n\nDependency Installed:\n  libICE.x86_64 0:1.0.9-9.el7                                                                       \n  libSM.x86_64 0:1.2.2-2.el7                                                                        \n  libXmu.x86_64 0:1.1.2-2.el7                                                                       \n  libXt.x86_64 0:1.1.5-3.el7                                                                        \n  libXxf86misc.x86_64 0:1.0.3-7.1.el7                                                               \n  libfontenc.x86_64 0:1.1.3-3.el7                                                                   \n  urw-base35-bookman-fonts.noarch 0:20170801-10.el7                                                 \n  urw-base35-c059-fonts.noarch 0:20170801-10.el7                                                    \n  urw-base35-d050000l-fonts.noarch 0:20170801-10.el7                                                \n  urw-base35-fonts.noarch 0:20170801-10.el7                                                         \n  urw-base35-fonts-common.noarch 0:20170801-10.el7                                                  \n  urw-base35-gothic-fonts.noarch 0:20170801-10.el7                                                  \n  urw-base35-nimbus-mono-ps-fonts.noarch 0:20170801-10.el7                                          \n  urw-base35-nimbus-roman-fonts.noarch 0:20170801-10.el7                                            \n  urw-base35-nimbus-sans-fonts.noarch 0:20170801-10.el7                                             \n  urw-base35-p052-fonts.noarch 0:20170801-10.el7                                                    \n  urw-base35-standard-symbols-ps-fonts.noarch 0:20170801-10.el7                                     \n  urw-base35-z003-fonts.noarch 0:20170801-10.el7                                                    \n  xorg-x11-font-utils.x86_64 1:7.5-21.el7                                                           \n  xorg-x11-server-utils.x86_64 0:7.7-20.el7                                                         \n\nComplete!\n</code></pre>"},{"location":"Linux/monitor/%E5%9F%BA%E4%BA%8EGrafana%2BLoki%2BPromatil%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0.html#2","title":"\u65b9\u68482:","text":"<pre><code># \u4e0b\u8f7dgrafana \u5305\nwget https://dl.grafana.com/oss/release/grafana-8.4.0-1.x86_64.rpm\n# \u5b89\u88c5grafana\nsudo yum install grafana-8.4.0-1.x86_64.rpm\n</code></pre>"},{"location":"Linux/monitor/%E5%9F%BA%E4%BA%8EGrafana%2BLoki%2BPromatil%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0.html#_4","title":"\u542f\u52a8\u670d\u52a1:","text":"<pre><code># \u91cd\u8f7dgrafana\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\nsudo systemctl daemon-reload\n\n# \u542f\u52a8grafana\u670d\u52a1\nsudo systemctl start grafana-server\n\n\n# \u67e5\u770bgrafana\u670d\u52a1\u72b6\u6001\nsudo systemctl status grafana-server\n[root@VM-24-9-centos ~]$ systemctl status grafana-server\n\u25cf grafana-server.service - Grafana instance\n   Loaded: loaded (/usr/lib/systemd/system/grafana-server.service; disabled; vendor preset: disabled)\n   Active: active (running) since Wed 2022-03-30 14:01:58 CST; 4min 42s ago\n     Docs: http://docs.grafana.org\n Main PID: 6213 (grafana-server)\n    Tasks: 13\n   Memory: 13.1M\n   CGroup: /system.slice/grafana-server.service\n           \u2514\u25006213 /usr/sbin/grafana-server --config=/etc/grafana/grafana.ini --pidfile=/var/run/g...\n\n# \u505c\u6b62grafana\u670d\u52a1\nsudo systemctl stop grafana-server\n</code></pre>"},{"location":"Linux/monitor/%E5%9F%BA%E4%BA%8EGrafana%2BLoki%2BPromatil%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0.html#grafana_1","title":"\u914d\u7f6eGrafana","text":"<p>\u7565</p>"},{"location":"Linux/monitor/%E5%9F%BA%E4%BA%8EGrafana%2BLoki%2BPromatil%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0.html#loki","title":"Loki\u5b89\u88c5","text":"<p>\u4e0b\u8f7d\u5730\u5740:https://github.com/grafana/loki/releases/download/v2.4.2/loki-linux-amd64.zip</p> <p>Loki\u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6\u4e0b\u8f7d\u5730\u5740:https://raw.githubusercontent.com/grafana/loki/master/cmd/loki/loki-local-config.yaml</p> <p>:book:\u53c2\u8003\u5b98\u65b9\u6587\u6863:https://grafana.com/docs/loki/latest/installation/local/</p>"},{"location":"Linux/monitor/%E5%9F%BA%E4%BA%8EGrafana%2BLoki%2BPromatil%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0.html#_5","title":"\u5b89\u88c5\u6b65\u9aa4","text":""},{"location":"Linux/monitor/%E5%9F%BA%E4%BA%8EGrafana%2BLoki%2BPromatil%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0.html#loki_1","title":"\u4e0b\u8f7dLoki","text":"<pre><code># \u7531\u4e8e\u670d\u52a1\u5668\u8bbf\u95eegithub\u6709\u70b9\u6162,\u6240\u4ee5\u91c7\u7528\u4e86\u4ee3\u7406\u52a0\u901f\nwget https://shrill-pond-3e81.hunsh.workers.dev/https://github.com/grafana/loki/releases/download/v2.4.2/loki-linux-amd64.zip\n\n# \u89e3\u538b\nunzip loki-linux-amd64.zip \n</code></pre>"},{"location":"Linux/monitor/%E5%9F%BA%E4%BA%8EGrafana%2BLoki%2BPromatil%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0.html#_6","title":"\u4e0b\u8f7d\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>wget https://shrill-pond-3e81.hunsh.workers.dev/https://raw.githubusercontent.com/grafana/loki/master/cmd/loki/loki-local-config.yaml\n</code></pre>"},{"location":"Linux/monitor/%E5%9F%BA%E4%BA%8EGrafana%2BLoki%2BPromatil%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0.html#loki_2","title":"Loki\u914d\u7f6e\u6587\u4ef6\u8c03\u6574","text":"<pre><code>auth_enabled: false\n\nserver:\n  http_listen_port: 3100 # \u76d1\u542c\u7aef\u53e3\n\ningester:\n  lifecycler:\n    address: 0.0.0.0 # \u76d1\u542c\u5730\u5740\n    ring:\n      kvstore:\n        store: inmemory\n      replication_factor: 1\n    final_sleep: 0s\n  chunk_idle_period: 5m\n  chunk_retain_period: 30s\n  max_transfer_retries: 0\n\nschema_config:\n  configs:\n    - from: 2018-04-15\n      store: boltdb\n      object_store: filesystem\n      schema: v11\n      index:\n        prefix: index_\n        period: 144h  #  \u6bcf\u5f20\u8868\u7684\u65f6\u95f4\u8303\u56f4 6\u5929\n      chunks:\n        period: 144h\n\nstorage_config:\n#  \u6d41\u6587\u4ef6\u5b58\u50a8\u5730\u5740\n  boltdb:\n    directory: /tmp/loki/index\n#  \u7d22\u5f15\u5b58\u50a8\u5730\u5740\n  filesystem:\n    directory: /tmp/loki/chunks\n\nlimits_config:\n  enforce_metric_name: false\n  reject_old_samples: true\n  reject_old_samples_max_age: 144h\n\nchunk_store_config:\n  max_look_back_period: 2160h  # \u6700\u5927\u53ef\u67e5\u8be2\u5386\u53f2\u65e5\u671f 90\u5929\n\n\ntable_manager:   # \u8868\u7684\u4fdd\u7559\u671f90\u5929\n  retention_deletes_enabled: true\n  retention_period: 720h\n</code></pre>"},{"location":"Linux/monitor/%E5%9F%BA%E4%BA%8EGrafana%2BLoki%2BPromatil%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0.html#promtail","title":"Promtail\u5b89\u88c5","text":"<p>\u4e0b\u8f7d\u5730\u5740:https://github.com/grafana/loki/releases/download/v2.4.2/promtail-linux-amd64.zip</p> <p>Promtail\u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6\u4e0b\u8f7d\u5730\u5740:https://raw.githubusercontent.com/grafana/loki/main/clients/cmd/promtail/promtail-local-config.yaml</p> <p>:book:\u53c2\u8003\u5b98\u65b9\u6587\u6863:https://grafana.com/docs/loki/latest/installation/local/</p>"},{"location":"Linux/monitor/%E5%9F%BA%E4%BA%8EGrafana%2BLoki%2BPromatil%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0.html#_7","title":"\u5b89\u88c5\u6b65\u9aa4","text":""},{"location":"Linux/monitor/%E5%9F%BA%E4%BA%8EGrafana%2BLoki%2BPromatil%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0.html#promtail_1","title":"\u4e0b\u8f7dPromtail","text":"<pre><code># \u7531\u4e8e\u670d\u52a1\u5668\u8bbf\u95eegithub\u6709\u70b9\u6162,\u6240\u4ee5\u91c7\u7528\u4e86\u4ee3\u7406\u52a0\u901f\nwget https://shrill-pond-3e81.hunsh.workers.dev/https://github.com/grafana/loki/releases/download/v2.4.2/promtail-linux-amd64.zip\n\n# \u89e3\u538b\nunzip promtail-linux-amd64.zip\n</code></pre>"},{"location":"Linux/monitor/%E5%9F%BA%E4%BA%8EGrafana%2BLoki%2BPromatil%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0.html#_8","title":"\u4e0b\u8f7d\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>wget https://shrill-pond-3e81.hunsh.workers.dev/https://raw.githubusercontent.com/grafana/loki/main/clients/cmd/promtail/promtail-local-config.yaml\n</code></pre>"},{"location":"Linux/monitor/%E5%9F%BA%E4%BA%8EGrafana%2BLoki%2BPromatil%E6%90%AD%E5%BB%BA%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B9%B3%E5%8F%B0.html#promtail_2","title":"Promtail\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>server:\n  http_listen_port: 9080\n  grpc_listen_port: 0\n\npositions:\n  filename: /tmp/positions.yaml\n\nclients:\n  - url: http://localhost:3100/loki/api/v1/push\n\nscrape_configs:\n- job_name: logs\n  pipeline_stages:\n  - match:\n      selector: '{job=\"\u65e5\u5fd7\u5206\u6790\u5e73\u53f0\"}'\n      stages:\n        - regex:\n            expression: ^(?P&lt;timestamp&gt;\\d+-\\d+-\\d+.\\d+:\\d+:\\d+) - (?P&lt;threadid&gt;\\d{3,6}) - (?P&lt;level&gt;INFO|ERROR|WARNING) - (?P&lt;filename&gt;.*?) - (?P&lt;lineno&gt;\\d+) - (?P&lt;requestid&gt;\\d+) - (?P&lt;systemname&gt;.*?) - (?P&lt;message&gt;.*?)$\n        - labels:\n            timestamp:\n            threadid:\n            level:\n            filename:\n            lineno:\n            requestid:\n            systemname:\n            message:\n  static_configs:\n  - targets:\n      - localhost\n    labels:\n      job: \u65e5\u5fd7\u5206\u6790\u5e73\u53f0 # labels\u540d\u79f0\n      __path__: C://Users//Jruing//Desktop//Automation_Testing//yunwei_info.log # \u91c7\u96c6\u65e5\u5fd7\u7684\u8def\u5f84\n\n</code></pre>"},{"location":"Linux/serverless/ServerLess%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Fnproject%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html","title":"ServerLess\u5b66\u4e60\u7b14\u8bb0-FnProject\u5e38\u7528\u547d\u4ee4","text":""},{"location":"Linux/serverless/ServerLess%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Fnproject%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html#_1","title":"\u542f\u52a8/\u505c\u6b62","text":"<pre><code>\n# \u542f\u52a8\n\nfn start\n\n# \u505c\u6b62\n\nfn stop\n\n</code></pre>"},{"location":"Linux/serverless/ServerLess%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Fnproject%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html#_2","title":"\u521b\u5efa","text":"<pre><code>\n[root@VM-24-9-centos serverless]# fn create\n\n\n\nMANAGEMENT COMMAND\n\n  fn create -   Create a new object\n\n\n\nUSAGE\n\n  fn [global options] create [command options] &lt;object-type&gt;\n\n\n\nDESCRIPTION\n\n  This command creates a new object ('app', 'context', 'function', or 'trigger').\n\n\n\nSUBCOMMANDS\n\n  app, apps, a               \u521b\u5efa\u5e94\u7528\n\n  context, ctx               \u521b\u5efa\n\n  function, func, f, fn      \u4e3a\u4e00\u4e2a\u5e94\u7528\u521b\u5efa\u4e00\u4e2a\u51fd\u6570\n\n  trigger, trig, t, tr       \u521b\u5efa\u4e00\u4e2a\u89e6\u53d1\u5668\n\n  help, h                    Shows a list of commands or help for one command\n\n\n\nCOMMAND OPTIONS\n\n  --help, -h  show help\n\n\n\nFURTHER HELP:  See 'fn create &lt;subcommand&gt; --help' for more information about a command.\n\n</code></pre>"},{"location":"Linux/serverless/ServerLess%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Fnproject%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html#_3","title":"\u67e5\u8be2","text":"<pre><code>\n[root@VM-24-9-centos serverless]# fn list\n\n\n\nMANAGEMENT COMMAND\n\n  fn list -   Return a list of created objects\n\n\n\nUSAGE\n\n  fn [global options] list [command options] &lt;subcommand&gt;\n\n\n\nDESCRIPTION\n\n  This command returns a list of created objects ('app', 'call', 'context', 'function' or 'trigger') or configurations.\n\n\n\nSUBCOMMANDS\n\n  apps, app, a                 \u5217\u51fa\u6240\u6709\u521b\u5efa\u7684\u5e94\u7528\n\n  config, config, cf           \u5217\u51fa\u5e94\u7528\u7684\u914d\u7f6e\n\n  contexts, context, ctx       \u5217\u51fa\u4e0a\u4e0b\u6587\n\n  functions, funcs, f, fn      \u5217\u51fa\u5e94\u7528\u5173\u8054\u7684\u51fd\u6570\n\n  triggers, trigs, t, tr       \u5217\u51fa\u6240\u6709\u7684\u89e6\u53d1\u5668\n\n  help, h                      Shows a list of commands or help for one command\n\n\n\nCOMMAND OPTIONS\n\n  --help, -h  show help\n\n\n\nFURTHER HELP:  See 'fn list &lt;subcommand&gt; --help' for more information about a command.\n\n\n\n</code></pre> <ul> <li> <p>\u67e5\u8be2\u51fd\u6570\u8be6\u60c5<code>fn inspect function &lt;app-name&gt; &lt;function-name&gt;</code></p> <p>```</p> <p>[root@VM-24-9-centos fn_demo]# fn inspect function fn_app fn_demo</p> <p>{</p> <pre><code>\"annotations\": {\n\n    \"fnproject.io/fn/invokeEndpoint\": \"http://localhost:8080/invoke/01HD5Z2WFTNG8G00RZJ0000002\" # \u51fd\u6570\u5b9e\u9645\u8c03\u7528\u5730\u5740\n\n},\n\n\"app_id\": \"01HD5YZTVENG8G00RZJ0000001\",\n\n\"created_at\": \"2023-10-20T07:16:36.474Z\",\n\n\"id\": \"01HD5Z2WFTNG8G00RZJ0000002\",\n\n\"idle_timeout\": 30,\n\n\"image\": \"fn_demo:0.0.2\",\n\n\"memory\": 256,\n\n\"name\": \"fn_demo\",\n\n\"timeout\": 30,\n\n\"updated_at\": \"2023-10-20T07:16:36.474Z\"\n</code></pre> <p>}</p> <p>```</p> </li> </ul>"},{"location":"Linux/serverless/ServerLess%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Fnproject%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html#_4","title":"\u5220\u9664","text":"<pre><code>[root@VM-24-9-centos serverless]# ./fn delete\n\n\n\nMANAGEMENT COMMAND\n\n  fn delete -   Delete an object\n\n\n\nUSAGE\n\n  fn [global options] delete [command options] &lt;subcommand&gt;\n\n\n\nDESCRIPTION\n\n  This command deletes a created object ('app', 'context', 'function' or 'trigger').\n\n\n\nSUBCOMMANDS\n\n  app, apps, a               \u5220\u9664\u5e94\u7528\n\n  config, config, cf         \u5220\u9664\u5e94\u7528\u5173\u8054\u51fd\u6570\u7684\u914d\u7f6e\n\n  context, ctx               \u5220\u9664\u4e0a\u4e0b\u6587\n\n  function, func, f, fn      \u5220\u9664\u5e94\u7528\u7684\u4e00\u4e2a\u51fd\u6570\n\n  trigger, trig, t, tr       \u5220\u9664\u89e6\u53d1\u5668\n\n  help, h                    Shows a list of commands or help for one command\n\n\n\nCOMMAND OPTIONS\n\n  --help, -h  show help\n\n\n\nFURTHER HELP:  See 'fn delete &lt;subcommand&gt; --help' for more information about a command.\n</code></pre>"},{"location":"Linux/serverless/ServerLess%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Fnproject%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html#_5","title":"\u8c03\u7528","text":""},{"location":"Linux/serverless/ServerLess%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Fnproject%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html#cli","title":"\u901a\u8fc7CLI\u8c03\u7528","text":"<pre><code>\nfn invoke &lt;app-name&gt; &lt;function-name&gt;\n\n</code></pre>"},{"location":"Linux/serverless/ServerLess%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Fnproject%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html#curl","title":"\u901a\u8fc7Curl\u8c03\u7528","text":"<pre><code>\ncurl -X \"POST\" -H \"Content-Type: application/json\" http://localhost:8080/invoke/01DJRP8FT8NG8G00GZJ0000002\n\n</code></pre>"},{"location":"Linux/serverless/ServerLess%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Fnproject%E6%90%AD%E5%BB%BA.html","title":"ServerLess\u5b66\u4e60\u7b14\u8bb0-\u642d\u5efaFnProject","text":""},{"location":"Linux/serverless/ServerLess%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Fnproject%E6%90%AD%E5%BB%BA.html#_1","title":"\u4ecb\u7ecd","text":"<p>\u5b98\u65b9\u6587\u6863\uff1ahttps://fnproject.io/tutorials/</p> <p>Fn \u662f\u4e00\u4e2a\u4e8b\u4ef6\u9a71\u52a8\u7684\u5f00\u6e90\u529f\u80fd\u5373\u670d\u52a1 FaaS\u8ba1\u7b97\u5e73\u53f0\uff0c\u60a8\u53ef\u4ee5\u5728\u4efb\u4f55\u5730\u65b9\u8fd0\u884c,\u5b83\u7684\u4e00\u4e9b\u4e3b\u8981\u7279\u70b9</p> <ul> <li> <p>\u5f00\u6e90</p> </li> <li> <p>\u539f\u751f Docker\uff1a\u4f7f\u7528\u4efb\u4f55 Docker \u5bb9\u5668\u4f5c\u4e3a\u4f60\u7684\u51fd\u6570</p> </li> <li> <p>\u652f\u6301\u6240\u6709\u8bed\u8a00</p> </li> <li> <p>\u968f\u5904\u8fd0\u884c</p> <ul> <li> <p>\u516c\u6709\u4e91\u3001\u79c1\u6709\u4e91\u548c\u6df7\u5408\u4e91</p> </li> <li> <p>\u5bfc\u5165 Lambda \u51fd\u6570\u5e76\u5728\u4efb\u4f55\u5730\u65b9\u8fd0\u884c\u5b83\u4eec</p> </li> </ul> </li> <li> <p>\u6613\u4e8e\u5f00\u53d1\u4eba\u5458\u4f7f\u7528</p> </li> <li> <p>\u6613\u4e8e\u64cd\u4f5c\u5458\u7ba1\u7406</p> </li> <li> <p>\u7b80\u5355\u800c\u5f3a\u5927\u7684\u53ef\u6269\u5c55\u6027</p> </li> </ul>"},{"location":"Linux/serverless/ServerLess%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Fnproject%E6%90%AD%E5%BB%BA.html#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li> <p>Docker 17.10.0-ce \u6216\u66f4\u9ad8\u7248\u672c</p> </li> <li> <p>\u6ce8\u518cDockerHub\u8d26\u53f7\uff08\u975e\u5fc5\u987b\uff0c\u5982\u679c\u4f7f\u7528\u672c\u5730\u6a21\u5f0f\u5219\u4e0d\u9700\u8981\uff0c\u5982\u679c\u9700\u8981\u5c06\u670d\u52a1\u63a8\u52a8\u5230\u4ed3\u5e93\u5219\u9700\u8981\uff09</p> </li> </ul>"},{"location":"Linux/serverless/ServerLess%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Fnproject%E6%90%AD%E5%BB%BA.html#linux","title":"Linux\u5b89\u88c5","text":""},{"location":"Linux/serverless/ServerLess%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Fnproject%E6%90%AD%E5%BB%BA.html#1","title":"\u65b9\u5f0f1 (\u901a\u8fc7\u811a\u672c\u5b89\u88c5)","text":"<pre><code>\ncurl -LSs https://raw.githubusercontent.com/fnproject/cli/master/install | sh\n\n</code></pre>"},{"location":"Linux/serverless/ServerLess%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Fnproject%E6%90%AD%E5%BB%BA.html#2","title":"\u65b9\u5f0f2 (\u4e8c\u8fdb\u5236\u5b89\u88c5)","text":"<pre><code>\n\u4e0b\u8f7d\n\nwget -o fn https://github.com/fnproject/fn/releases/download/0.3.25/fn_linux\n\n# \u8d4b\u4e88\u53ef\u6267\u884c\u6743\u9650\n\nchmod +x fn\n\n</code></pre>"},{"location":"Linux/serverless/ServerLess%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Fnproject%E6%90%AD%E5%BB%BA.html#_3","title":"\u542f\u52a8\u670d\u52a1","text":"<p>\u542f\u52a8\u547d\u4ee4\uff1a<code>./fn start</code></p> <p>\u6ce8\u610f\uff1a\u9ed8\u8ba4\u4f7f\u75288080\u7aef\u53e3\u53ca2375\u7aef\u53e3\uff0c\u82e5\u60f3\u4fee\u6539\u4e3a\u5176\u4ed6\u7684\u7aef\u53e3\u9700\u8981\u6267\u884c<code>fn start -p 8081</code>\u53ca\u914d\u7f6e\u73af\u5883\u53d8\u91cf <code>export FN_API_URL=http://127.0.0.1:8081</code></p> <pre><code>\n[root@localhost-centos serverless]# ./fn start\n\n2023/10/19 18:02:02 \u00a1\u00a1\u00a1 'fn start' should NOT be used for PRODUCTION !!! see https://github.com/fnproject/fn-helm/\n\ntime=\"2023-10-19T10:02:02Z\" level=info msg=\"Setting log level to\" fields.level=info\n\ntime=\"2023-10-19T10:02:02Z\" level=info msg=\"Registering data store provider 'sql'\"\n\ntime=\"2023-10-19T10:02:02Z\" level=info msg=\"Connecting to DB\" url=\"sqlite3:///app/data/fn.db\"\n\ntime=\"2023-10-19T10:02:02Z\" level=info msg=\"datastore dialed\" datastore=sqlite3 max_idle_connections=256 url=\"sqlite3:///app/data/fn.db\"\n\ntime=\"2023-10-19T10:02:02Z\" level=info msg=\"agent starting cfg={MinDockerVersion:17.10.0-ce ContainerLabelTag: DockerNetworks: DockerLoadFile: DisableUnprivilegedContainers:false FreezeIdle:50ms HotPoll:200ms HotLauncherTimeout:1h0m0s HotPullTimeout:10m0s HotStartTimeout:5s DetachedHeadRoom:6m0s MaxResponseSize:0 MaxHdrResponseSize:0 MaxLogSize:1048576 MaxTotalCPU:0 MaxTotalMemory:0 MaxFsSize:0 MaxPIDs:50 MaxOpenFiles:0xc420486518 MaxLockedMemory:0xc420486530 MaxPendingSignals:0xc420486538 MaxMessageQueue:0xc420486540 PreForkPoolSize:0 PreForkImage:busybox PreForkCmd:tail -f /dev/null PreForkUseOnce:0 PreForkNetworks: EnableNBResourceTracker:false MaxTmpFsInodes:0 DisableReadOnlyRootFs:false DisableDebugUserLogs:false IOFSEnableTmpfs:false EnableFDKDebugInfo:false IOFSAgentPath:/iofs IOFSMountRoot:/root/.fn/iofs IOFSOpts: ImageCleanMaxSize:0 ImageCleanExemptTags: ImageEnableVolume:false}\"\n\ntime=\"2023-10-19T10:02:02Z\" level=info msg=\"no docker auths from config files found (this is fine)\" error=\"open /root/.dockercfg: no such file or directory\"\n\ntime=\"2023-10-19T10:02:02Z\" level=info msg=\"available memory\" cgroup_limit=9223372036854771712 head_room=295451443 total_memory=2954514432\n\ntime=\"2023-10-19T10:02:02Z\" level=info msg=\"ram reservations\" avail_memory=2659062989\n\ntime=\"2023-10-19T10:02:02Z\" level=info msg=\"available cpu\" avail_cpu=4000 total_cpu=4000\n\ntime=\"2023-10-19T10:02:02Z\" level=info msg=\"cpu reservations\" cpu=4000\n\ntime=\"2023-10-19T10:02:02Z\" level=info msg=\"\\n        ______\\n       / ____/___\\n      / /_  / __ \\\\\\n     / __/ / / / /\\n    /_/   /_/ /_/\\n\"\n\ntime=\"2023-10-19T10:02:02Z\" level=info msg=\"Fn serving on `:8080`\" type=full version=0.3.750\n\n\n\n</code></pre>"},{"location":"Linux/serverless/ServerLess%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%90%AD%E5%BB%BAFN%E7%A4%BA%E4%BE%8B.html","title":"ServerLess\u5b66\u4e60\u7b14\u8bb0-\u642d\u5efaFnProject\u793a\u4f8b","text":""},{"location":"Linux/serverless/ServerLess%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%90%AD%E5%BB%BAFN%E7%A4%BA%E4%BE%8B.html#_1","title":"\u521d\u59cb\u5316\u51fd\u6570\u76ee\u5f55","text":"<pre><code>\n# \u521d\u59cb\u5316 fn_demo1\n\n[root@VM-24-9-centos serverless]# fn init --runtime python fn_demo1\n\nCreating function at: ./fn_demo1\n\nUnable to get latest FDK version, using default\n\nFunction boilerplate generated.\n\nfunc.yaml created.\n\n\n\n# \u521d\u59cb\u5316 fn_demo2\n\n[root@VM-24-9-centos serverless]# fn init --runtime python fn_demo2\n\nCreating function at: ./fn_demo2\n\nFunction boilerplate generated.\n\nfunc.yaml created.\n\n</code></pre>"},{"location":"Linux/serverless/ServerLess%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%90%AD%E5%BB%BAFN%E7%A4%BA%E4%BE%8B.html#_2","title":"\u521b\u5efa\u5e94\u7528","text":"<pre><code>\n[root@VM-24-9-centos serverless]# fn create app fn_app\n\nSuccessfully created app:  fn_app\n\n</code></pre>"},{"location":"Linux/serverless/ServerLess%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%90%AD%E5%BB%BAFN%E7%A4%BA%E4%BE%8B.html#_3","title":"\u4fee\u6539\u51fd\u6570\u4ee3\u7801","text":"<p>\u4e0b\u9762\u4e3a\u51fd\u6570<code>fn_demo1</code>\u7684\u4fee\u6539\uff0c<code>fn_demo2</code> \u53c2\u8003<code>fn_demo1</code>\u8fdb\u884c\u4fee\u6539</p> <pre><code>\n[root@VM-24-9-centos serverless]# cd fn_demo1/\n\n[root@VM-24-9-centos fn_demo1]# ls\n\nfunc.py  func.yaml  requirements.txt\n\n[root@VM-24-9-centos fn_demo1]# ll\n\ntotal 12\n\n-rw-r--r-- 1 root root 576 Oct 20 17:09 func.py\n\n-rw-r--r-- 1 root root 207 Oct 20 17:10 func.yaml\n\n-rw-r--r-- 1 root root   3 Oct 20 17:10 requirements.txt\n\n\n\n# \u4fee\u6539func.py\n\n[root@VM-24-9-centos fn_demo1]# vi func.py \n\nimport io\n\nimport json\n\nimport logging\n\n\n\nfrom fdk import response\n\n\n\n\n\ndef handler(ctx, data: io.BytesIO = None):\n\n    name = \"fn_demo1\" # \u5c06\u6b64\u5904\u7684World\u4fee\u6539\u4e3afn_demo1\u65b9\u4fbf\u6d4b\u8bd5\u8c03\u7528\u540e\u7684\u5c55\u793a\u7ed3\u679c\n\n    try:\n\n        body = json.loads(data.getvalue())\n\n        name = body.get(\"name\")\n\n    except (Exception, ValueError) as ex:\n\n        logging.getLogger().info('error parsing json payload: ' + str(ex))\n\n\n\n    logging.getLogger().info(\"Inside Python Hello World function\")\n\n    return response.Response(\n\n        ctx, response_data=json.dumps(\n\n            {\"message\": \"Hello {0}\".format(name)}),\n\n        headers={\"Content-Type\": \"application/json\"}\n\n</code></pre> <p>func.yaml\u914d\u7f6e\u6587\u4ef6\u5b57\u6bb5\u8be6\u89e3</p> <p>```</p> <p>schema_version: 20180708  #\u6807\u8bc6\u6b64\u51fd\u6570\u6587\u4ef6\u7684\u67b6\u6784\u7248\u672c</p> <p>name: fn_demo1  #\u51fd\u6570\u7684\u540d\u79f0\u3002\u4e0e\u76ee\u5f55\u540d\u79f0\u5339\u914d</p> <p>version: 0.0.1 #\u7248\u672c\u53f7\uff1a\u4ece 0.0.1 \u81ea\u52a8\u5f00\u59cb</p> <p>runtime: python #\u8fd0\u884c\u65f6\u8bbe\u7f6e\u7684\u8bed\u8a00\u73af\u5883</p> <p>entrypoint: /python/bin/fdk /function/func.py handler #\u8c03\u7528\u51fd\u6570\u65f6\u8981\u8c03\u7528\u7684\u53ef\u6267\u884c\u6587\u4ef6\u7684\u540d\u79f0</p> <p>memory: 256 #\u51fd\u6570\u7684\u6700\u5927\u5185\u5b58\u5927\u5c0f\uff0c\u5355\u4f4d\uff1aMB</p> <p>```</p>"},{"location":"Linux/serverless/ServerLess%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%90%AD%E5%BB%BAFN%E7%A4%BA%E4%BE%8B.html#_4","title":"\u90e8\u7f72\u5e94\u7528/\u51fd\u6570","text":"<p>\u5c06\u51fd\u6570<code>fn_demo1</code> \u548c<code>fn_demo2</code>\u5206\u522b\u4e0e<code>fn_app</code>\u5173\u8054\u5e76\u90e8\u7f72,\u90e8\u7f72<code>fn_demo2</code>\u4e0e<code>fn_demo1</code>\u6b65\u9aa4\u4e00\u81f4</p> <pre><code>\n# \u8fdb\u5165\u51fd\u6570\u76ee\u5f55\n\n[root@VM-24-9-centos serverless]# cd fn_demo1/\n\n# \u90e8\u7f72\u51fd\u6570\n\n[root@VM-24-9-centos fn_demo1]# fn --verbose deploy --app fn_app --local\n\nDeploying fn_demo1 to app: fn_app\n\nBumped to version 0.0.4\n\nUsing Container engine docker\n\nBuilding image fn_demo1:0.0.4 \n\nDockerfile content\n\n-----------------------------------\n\nFROM fnproject/python:3.9-dev as build-stage\n\nWORKDIR /function\n\nADD requirements.txt /function/\n\n\n\n            RUN pip3 install --target /python/  --no-cache --no-cache-dir -r requirements.txt &amp;&amp;\\\n\n                rm -fr ~/.cache/pip /tmp* requirements.txt func.yaml Dockerfile .venv &amp;&amp;\\\n\n                chmod -R o+r /python\n\nADD . /function/\n\nRUN rm -fr /function/.pip_cache\n\nFROM fnproject/python:3.9\n\nWORKDIR /function\n\nCOPY --from=build-stage /python /python\n\nCOPY --from=build-stage /function /function\n\nRUN chmod -R o+r /function\n\nENV PYTHONPATH=/function:/python\n\nENTRYPOINT [\"/python/bin/fdk\", \"/function/func.py\", \"handler\"]\n\n-----------------------------------\n\nFN_REGISTRY:  FN_REGISTRY is not set.\n\nCurrent Context:  default\n\n[+] Building 120.6s (17/17) FINISHED                                                                                                                     \n\n =&gt; [internal] load build definition from Dockerfile2218814693                                                                                      0.0s\n\n =&gt; =&gt; transferring dockerfile: 643B                                                                                                                0.0s\n\n =&gt; [internal] load .dockerignore                                                                                                                   0.0s\n\n =&gt; =&gt; transferring context: 2B                                                                                                                     0.0s\n\n =&gt; [internal] load metadata for docker.io/fnproject/python:3.9                                                                                     0.7s\n\n =&gt; [internal] load metadata for docker.io/fnproject/python:3.9-dev                                                                                 0.8s\n\n =&gt; [build-stage 1/6] FROM docker.io/fnproject/python:3.9-dev@sha256:2a257fac48519801b646c7217b151049bfaa29e75c0d8cdd9469e6db86a45adc               0.0s\n\n =&gt; [stage-1 1/5] FROM docker.io/fnproject/python:3.9@sha256:8af5441307d08e86b79b46675050cb4b98b251bd980b32fc58764702710399ab                       0.0s\n\n =&gt; [internal] load build context                                                                                                                   0.0s\n\n =&gt; =&gt; transferring context: 952B                                                                                                                   0.0s\n\n =&gt; CACHED [build-stage 2/6] WORKDIR /function                                                                                                      0.0s\n\n =&gt; CACHED [build-stage 3/6] ADD requirements.txt /function/                                                                                        0.0s\n\n =&gt; [build-stage 4/6] RUN pip3 install --target /python/  --no-cache --no-cache-dir -r requirements.txt &amp;&amp;       rm -fr ~/.cache/pip /tmp* requi  118.8s\n\n =&gt; [build-stage 5/6] ADD . /function/                                                                                                              0.0s\n\n =&gt; [build-stage 6/6] RUN rm -fr /function/.pip_cache                                                                                               0.2s \n\n =&gt; CACHED [stage-1 2/5] WORKDIR /function                                                                                                          0.0s \n\n =&gt; [stage-1 3/5] COPY --from=build-stage /python /python                                                                                           0.1s \n\n =&gt; [stage-1 4/5] COPY --from=build-stage /function /function                                                                                       0.1s \n\n =&gt; [stage-1 5/5] RUN chmod -R o+r /function                                                                                                        0.2s \n\n =&gt; exporting to image                                                                                                                              0.1s\n\n =&gt; =&gt; exporting layers                                                                                                                             0.1s\n\n =&gt; =&gt; writing image sha256:5700ac5e7fc00f10b9c812292283184c25be858c8cf537e9b15d1d3dec80ef96                                                        0.0s\n\n =&gt; =&gt; naming to docker.io/library/fn_demo1:0.0.1                                                                                                   0.0s\n\n\n\nUpdating function fn_demo1 using image fn_demo1:0.0.1...\n\n</code></pre>"},{"location":"Linux/serverless/ServerLess%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%90%AD%E5%BB%BAFN%E7%A4%BA%E4%BE%8B.html#_5","title":"\u67e5\u770b\u751f\u6210\u7684\u670d\u52a1\u955c\u50cf","text":"<pre><code>\n[root@VM-24-9-centos fn_demo2]# docker images\n\nREPOSITORY                   TAG       IMAGE ID       CREATED          SIZE\n\nfn_demo2                     0.0.2     82a9bc7b0f7f   59 seconds ago   174MB\n\nfn_demo1                     0.0.4     5700ac5e7fc0   2 minutes ago    174MB\n\n</code></pre>"},{"location":"Linux/serverless/ServerLess%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%90%AD%E5%BB%BAFN%E7%A4%BA%E4%BE%8B.html#_6","title":"\u83b7\u53d6\u51fd\u6570\u4fe1\u606f","text":"<p>\u67e5\u770b<code>fn_demo1</code>\u7684\u4fe1\u606f</p> <pre><code>\n[root@VM-24-9-centos serverless]# ./fn inspect function fn_app fn_demo1\n\n{\n\n    \"annotations\": {\n\n        \"fnproject.io/fn/invokeEndpoint\": \"http://localhost:8080/invoke/01HD66V4V6NG8G00RZJ000000H\" # \u51fd\u6570\u7684\u8c03\u7528\u5730\u5740\n\n    },\n\n    \"app_id\": \"01HD65NGGGNG8G00RZJ000000G\",\n\n    \"created_at\": \"2023-10-20T09:32:11.494Z\",\n\n    \"id\": \"01HD66V4V6NG8G00RZJ000000H\",\n\n    \"idle_timeout\": 30,\n\n    \"image\": \"fn_demo1:0.0.4\",\n\n    \"memory\": 256,\n\n    \"name\": \"fn_demo1\",\n\n    \"timeout\": 30,\n\n    \"updated_at\": \"2023-10-20T09:32:11.494Z\"\n\n}\n\n</code></pre>"},{"location":"Linux/serverless/ServerLess%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%90%AD%E5%BB%BAFN%E7%A4%BA%E4%BE%8B.html#_7","title":"\u8c03\u7528\u51fd\u6570","text":""},{"location":"Linux/serverless/ServerLess%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%90%AD%E5%BB%BAFN%E7%A4%BA%E4%BE%8B.html#fn","title":"\u901a\u8fc7fn\u8c03\u7528\u51fd\u6570","text":"<pre><code>\n[root@VM-24-9-centos serverless]# fn invoke fn_app fn_demo1\n\n{\"message\": \"Hello fn_demo1\"}\n\n[root@VM-24-9-centos serverless]# fn invoke fn_app fn_demo2\n\n{\"message\": \"Hello fn_demo2\"}\n\n</code></pre>"},{"location":"Linux/serverless/ServerLess%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%90%AD%E5%BB%BAFN%E7%A4%BA%E4%BE%8B.html#curl","title":"\u901a\u8fc7Curl\u8c03\u7528\u51fd\u6570","text":"<pre><code>\n[root@VM-24-9-centos serverless]# curl -X \"POST\" -H \"Content-Type: application/json\" -d '{\"name\":\"fn_demo1\"}' http://localhost:8080/invoke/01HD66V4V6NG8G00RZJ000000H\n\n{\"message\": \"Hello fn_demo1\"}\n\n[root@VM-24-9-centos serverless]# curl -X \"POST\" -H \"Content-Type: application/json\" -d '{\"name\":\"fn_demo2\"}' http://localhost:8080/invoke/01HD66XF41NG8G00RZJ000000J\n\n{\"message\": \"Hello fn_demo2\"}\n\n</code></pre>"},{"location":"Python/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Schema%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E7%B1%BB%E5%9E%8B%E6%A0%A1%E9%AA%8C.html","title":"Python\u5b66\u4e60\u7b14\u8bb0-Schema\u6570\u636e\u7ed3\u6784\u53ca\u7c7b\u578b\u6821\u9a8c","text":"<p>\u4f7f\u7528 <code>schema</code> \u5e93\u6765\u6267\u884c\u6570\u636e\u7ed3\u6784\u7684\u6821\u9a8c\u3002<code>schema</code> \u662f\u4e00\u4e2a\u7b80\u5355\u800c\u5f3a\u5927\u7684\u5e93\uff0c\u7528\u4e8e\u5b9a\u4e49\u548c\u9a8c\u8bc1 Python \u6570\u636e\u7ed3\u6784\u7684\u7ea6\u675f</p>"},{"location":"Python/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Schema%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E7%B1%BB%E5%9E%8B%E6%A0%A1%E9%AA%8C.html#and","title":"And","text":"<p><code>And</code> \u4ee3\u8868\u5fc5\u9009\uff0c\u6570\u636e\u7ed3\u6784\u91cc\u5fc5\u987b\u5305\u542b\u8fd9\u4e2a schema\uff0c\u5982\u4e0b\u65b9\u58f0\u660e\u4e86 <code>name</code> \uff0c\u5219\u4ee3\u8868\u8fd9\u4e2a<code>name</code>\u5fc5\u987b\u5b58\u5728\u4e0e\u5b57\u5178\u4e2d</p> <pre><code>from schema import Schema, And, SchemaError\nuser_schema = Schema([\n    {\n        \"name\": And(str)\n    }\n])\nuser_data_1 = [{\n    \"name\": \"jruing\",\n}]\nuser_data_2 = [{\n    \"name\": 666,\n}]\ntry:\n    user_result_1 = user_schema.validate(user_data_1)\n    print(f\"\u6570\u636e\u6821\u9a8cuser_result_1\uff1a{user_result_1}\")\nexcept SchemaError as e:\n    print(f\"\u6570\u636e\u6821\u9a8c\u5f02\u5e38user_result_1:{e}\")\n\ntry:\n    user_result_2 = user_schema.validate(user_data_2)\n    print(f\"\u6570\u636e\u6821\u9a8cuser_result_2\uff1a{user_result_2}\")\nexcept SchemaError as e:\n    print(f\"\u6570\u636e\u6821\u9a8c\u5f02\u5e38user_result_2:{e}\")\n==========\u8c03\u7528\u7ed3\u679c==========\n\u6570\u636e\u6821\u9a8cuser_result_1\uff1a[{'name': 'jruing'}]\n\u6570\u636e\u6821\u9a8c\u5f02\u5e38user_result_2:Or({'name': And(&lt;class 'str'&gt;)}) did not validate {'name': 666}\nKey 'name' error:\n666 should be instance of 'str'\n</code></pre>"},{"location":"Python/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Schema%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E7%B1%BB%E5%9E%8B%E6%A0%A1%E9%AA%8C.html#or","title":"Or","text":"<p><code>Or</code> \u4ee3\u8868\u503c\u7684\u7c7b\u578b\u5fc5\u987b\u4e3a\u67d0\u4e24\u4e2a\u7c7b\u578b\uff0c\u6bd4\u5982<code>int</code> \u6216 <code>float</code>\uff0c<code>tuple</code>\u6216<code>list</code></p> <pre><code>from schema import Schema, And, SchemaError, Or\nuser_schema = Schema([\n    {\n        \"name\": And(str),\n        \"money\": Or(int,float)\n    }\n])\nuser_data_1 = [{\n    \"name\": \"jruing\",\n    \"money\": 1000,\n}]\nuser_data_2 = [{\n    \"name\": \"jruing\",\n    \"money\": 1000.1,\n}]\nuser_data_3 = [{\n    \"name\": \"jruing\",\n    \"money\": \"1000.1\",\n}]\ntry:\n    user_result_1 = user_schema.validate(user_data_1)\n    print(f\"\u6570\u636e\u6821\u9a8cuser_result_1\uff1a{user_result_1}\")\nexcept SchemaError as e:\n    print(f\"\u6570\u636e\u6821\u9a8c\u5f02\u5e38user_result_1:{e}\")\n\ntry:\n    user_result_2 = user_schema.validate(user_data_2)\n    print(f\"\u6570\u636e\u6821\u9a8cuser_result_2\uff1a{user_result_2}\")\nexcept SchemaError as e:\n    print(f\"\u6570\u636e\u6821\u9a8c\u5f02\u5e38user_result_2:{e}\")\n\ntry:\n    user_result_3 = user_schema.validate(user_data_3)\n    print(f\"\u6570\u636e\u6821\u9a8cuser_result_3\uff1a{user_result_3}\")\nexcept SchemaError as e:\n    print(f\"\u6570\u636e\u6821\u9a8c\u5f02\u5e38user_result_3:{e}\")\n==========\u8c03\u7528\u7ed3\u679c==========\n\u6570\u636e\u6821\u9a8cuser_result_1\uff1a[{'name': 'jruing', 'money': 1000, 'addr': '\u4e2d\u56fd', 'country': '\u4e2d\u56fd', 'email': '123456@qq.com'}]\n\u6570\u636e\u6821\u9a8c\u5f02\u5e38user_result_2:Or({'name': And(&lt;class 'str'&gt;), 'money': Or(&lt;class 'int'&gt;, &lt;class 'float'&gt;), Optional('addr'): And(&lt;class 'str'&gt;), Optional('email'): And(&lt;class 'str'&gt;, Regex('^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\\\.[a-zA-Z0-9-.]+$', flags=re.IGNORECASE)), 'country': Const('\u4e2d\u56fd')}) did not validate {'name': 'jruing', 'money': 1000.1, 'addr': '1111', 'country': '\u5c71\u897f', 'email': '123456'}\nKey 'country' error:\n'\u4e2d\u56fd' does not match '\u5c71\u897f'\n</code></pre>"},{"location":"Python/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Schema%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E7%B1%BB%E5%9E%8B%E6%A0%A1%E9%AA%8C.html#const","title":"Const","text":"<p><code>Const</code> \u4ee3\u8868\u503c\u5fc5\u987b\u4e3a\u6307\u5b9a\u7684\u67d0\u4e2a\u5e38\u91cf\uff0c\u6bd4\u5982\u4e0b\u9762\u7684 <code>country</code>\u5fc5\u987b\u4e3a<code>\u4e2d\u56fd</code></p> <pre><code>import re\n\nfrom schema import Schema, And, SchemaError, Or, Optional, Regex, Const\n\nuser_schema = Schema([\n    {\n        \"name\": And(str),\n        \"money\": Or(int, float),\n        Optional(\"addr\"): And(str),\n        Optional(\"email\"): And(str, Regex(r'^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$', flags=re.I)),\n        \"country\": Const(\"\u4e2d\u56fd\")\n\n    }\n])\nuser_data_1 = [{\n    \"name\": \"jruing\",\n    \"money\": 1000,\n    \"addr\": \"\u4e2d\u56fd\",\n    \"country\": \"\u4e2d\u56fd\",\n    \"email\": \"123456@qq.com\"\n\n}]\nuser_data_2 = [{\n    \"name\": \"jruing\",\n    \"money\": 1000.1,\n    \"addr\": \"1111\",\n    \"country\": \"\u5c71\u897f\",\n    \"email\": \"123456\"\n\n}]\n\ntry:\n    user_result_1 = user_schema.validate(user_data_1)\n    print(f\"\u6570\u636e\u6821\u9a8cuser_result_1\uff1a{user_result_1}\")\nexcept SchemaError as e:\n    print(f\"\u6570\u636e\u6821\u9a8c\u5f02\u5e38user_result_1:{e}\")\n\ntry:\n    user_result_2 = user_schema.validate(user_data_2)\n    print(f\"\u6570\u636e\u6821\u9a8cuser_result_2\uff1a{user_result_2}\")\nexcept SchemaError as e:\n    print(f\"\u6570\u636e\u6821\u9a8c\u5f02\u5e38user_result_2:{e}\")\n==========\u8c03\u7528\u7ed3\u679c==========\n\u6570\u636e\u6821\u9a8cuser_result_1\uff1a[{'name': 'jruing', 'money': 1000, 'addr': '\u4e2d\u56fd', 'country': '\u4e2d\u56fd', 'email': '123456@qq.com'}]\n\u6570\u636e\u6821\u9a8c\u5f02\u5e38user_result_2:Or({'name': And(&lt;class 'str'&gt;), 'money': Or(&lt;class 'int'&gt;, &lt;class 'float'&gt;), Optional('addr'): And(&lt;class 'str'&gt;), Optional('email'): And(&lt;class 'str'&gt;, Regex('^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\\\.[a-zA-Z0-9-.]+$', flags=re.IGNORECASE)), 'country': Const('\u4e2d\u56fd')}) did not validate {'name': 'jruing', 'money': 1000.1, 'addr': '1111', 'country': '\u5c71\u897f', 'email': '123456'}\nKey 'country' error:\n'\u4e2d\u56fd' does not match '\u5c71\u897f'\n</code></pre>"},{"location":"Python/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Schema%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E7%B1%BB%E5%9E%8B%E6%A0%A1%E9%AA%8C.html#optional","title":"Optional","text":"<p><code>Optional</code> \u4ee3\u8868\u8fd9\u4e2akey\u6216\u8005\u5143\u7d20\u4e3a\u975e\u5fc5\u9009\uff0c\u53ef\u6709\u53ef\u65e0</p> <pre><code>from schema import Schema, And, SchemaError, Or, Optional\n\nuser_schema = Schema([\n    {\n        \"name\": And(str),\n        \"money\": Or(int, float),\n        Optional(\"addr\"): And(str)\n\n    }\n])\nuser_data_1 = [{\n    \"name\": \"jruing\",\n    \"money\": 1000,\n    \"addr\": \"\u4e2d\u56fd\"\n\n}]\nuser_data_2 = [{\n    \"name\": \"jruing\",\n    \"money\": 1000.1,\n\n}]\n\ntry:\n    user_result_1 = user_schema.validate(user_data_1)\n    print(f\"\u6570\u636e\u6821\u9a8cuser_result_1\uff1a{user_result_1}\")\nexcept SchemaError as e:\n    print(f\"\u6570\u636e\u6821\u9a8c\u5f02\u5e38user_result_1:{e}\")\n\ntry:\n    user_result_2 = user_schema.validate(user_data_2)\n    print(f\"\u6570\u636e\u6821\u9a8cuser_result_2\uff1a{user_result_2}\")\nexcept SchemaError as e:\n    print(f\"\u6570\u636e\u6821\u9a8c\u5f02\u5e38user_result_2:{e}\")\n==========\u8c03\u7528\u7ed3\u679c==========\n\u6570\u636e\u6821\u9a8cuser_result_1\uff1a[{'name': 'jruing', 'money': 1000, 'addr': '\u4e2d\u56fd'}]\n\u6570\u636e\u6821\u9a8cuser_result_2\uff1a[{'name': 'jruing', 'money': 1000.1}]\n</code></pre>"},{"location":"Python/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Schema%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E7%B1%BB%E5%9E%8B%E6%A0%A1%E9%AA%8C.html#use","title":"Use","text":"<p><code>Use</code> \u51fd\u6570\u5141\u8bb8\u4f60\u5728\u9a8c\u8bc1\u524d\u5bf9\u6570\u636e\u8fdb\u884c\u8f6c\u6362\u3002\u8fd9\u5bf9\u4e8e\u5728\u9a8c\u8bc1\u4e4b\u524d\u5bf9\u6570\u636e\u8fdb\u884c\u6e05\u7406\u3001\u683c\u5f0f\u5316\u6216\u5176\u4ed6\u64cd\u4f5c\u975e\u5e38\u6709\u7528\u3002</p> <pre><code>import re\n\nfrom schema import Schema, And, SchemaError, Or, Optional, Regex, Const, Use\n\nuser_schema = Schema([\n    {\n        \"name\": And(str),\n        \"money\": Or(int, float),\n        \"age\": Use(int),\n        Optional(\"addr\"): And(str),\n        Optional(\"email\"): And(str, Regex(r'^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$', flags=re.I)),\n        Optional(\"country\"): Const(\"\u4e2d\u56fd\")\n\n    }\n])\nuser_data_1 = [{\n    \"name\": \"jruing\",\n    \"money\": 1000,\n    \"age\": 11,\n    \"addr\": \"\u4e2d\u56fd\",\n    \"country\": \"\u4e2d\u56fd\",\n    \"email\": \"123456@qq.com\"\n\n}]\nuser_data_2 = [{\n    \"name\": \"jruing\",\n    \"money\": 1000.1,\n    \"age\": \"18\",\n    \"addr\": \"1111\",\n    \"email\": \"123456@qq.com\"\n\n}]\nuser_data_3 = [{\n    \"name\": \"jruing\",\n    \"money\": 1000.1,\n    \"age\": \"fff\",\n    \"addr\": \"1111\",\n    \"email\": \"123456@qq.com\"\n\n}]\ntry:\n    user_result_1 = user_schema.validate(user_data_1)\n    print(f\"\u6570\u636e\u6821\u9a8cuser_result_1\uff1a{user_result_1}\")\nexcept SchemaError as e:\n    print(f\"\u6570\u636e\u6821\u9a8c\u5f02\u5e38user_result_1:{e}\")\n\ntry:\n    user_result_2 = user_schema.validate(user_data_2)\n    print(f\"\u6570\u636e\u6821\u9a8cuser_result_2\uff1a{user_result_2}\")\nexcept SchemaError as e:\n    print(f\"\u6570\u636e\u6821\u9a8c\u5f02\u5e38user_result_2:{e}\")\ntry:\n    user_result_3 = user_schema.validate(user_data_3)\n    print(f\"\u6570\u636e\u6821\u9a8cuser_result_3\uff1a{user_result_3}\")\nexcept SchemaError as e:\n    print(f\"\u6570\u636e\u6821\u9a8c\u5f02\u5e38user_result_3:{e}\")\n==========\u8c03\u7528\u7ed3\u679c==========\n\u6570\u636e\u6821\u9a8cuser_result_1\uff1a[{'name': 'jruing', 'money': 1000, 'age': 11, 'addr': '\u4e2d\u56fd', 'country': '\u4e2d\u56fd', 'email': '123456@qq.com'}]\n\u6570\u636e\u6821\u9a8cuser_result_2\uff1a[{'name': 'jruing', 'money': 1000.1, 'age': 18, 'addr': '1111', 'email': '123456@qq.com'}]\n\u6570\u636e\u6821\u9a8c\u5f02\u5e38user_result_3:Or({'name': And(&lt;class 'str'&gt;), 'money': Or(&lt;class 'int'&gt;, &lt;class 'float'&gt;), 'age': Use(&lt;class 'int'&gt;), Optional('addr'): And(&lt;class 'str'&gt;), Optional('email'): And(&lt;class 'str'&gt;, Regex('^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\\\.[a-zA-Z0-9-.]+$', flags=re.IGNORECASE)), Optional('country'): Const('\u4e2d\u56fd')}) did not validate {'name': 'jruing', 'money': 1000.1, 'age': 'fff', 'addr': '1111', 'email': '123456@qq.com'}\nKey 'age' error:\nint('fff') raised ValueError(\"invalid literal for int() with base 10: 'fff'\")\n</code></pre>"},{"location":"Python/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Schema%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E7%B1%BB%E5%9E%8B%E6%A0%A1%E9%AA%8C.html#regex","title":"Regex","text":"<p>\u901a\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5bf9\u503c\u8fdb\u884c\u5339\u914d\u6821\u9a8c\uff0c\u5e38\u7528\u7684\u5c31\u662f\u90ae\u7bb1\uff0c\u624b\u673a\u53f7\u7b49\u573a\u666f</p> <pre><code>import re\n\nfrom schema import Schema, And, SchemaError, Or, Optional, Regex\n\nuser_schema = Schema([\n    {\n        \"name\": And(str),\n        \"money\": Or(int, float),\n        Optional(\"addr\"): And(str),\n        Optional(\"email\"): And(str, Regex(r'^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$', flags=re.I))\n\n    }\n])\nuser_data_1 = [{\n    \"name\": \"jruing\",\n    \"money\": 1000,\n    \"addr\": \"\u4e2d\u56fd\",\n    \"email\": \"123456@qq.com\"\n\n}]\nuser_data_2 = [{\n    \"name\": \"jruing\",\n    \"money\": 1000.1,\n    \"addr\": \"1111\",\n    \"email\": \"123456\"\n\n}]\n\ntry:\n    user_result_1 = user_schema.validate(user_data_1)\n    print(f\"\u6570\u636e\u6821\u9a8cuser_result_1\uff1a{user_result_1}\")\nexcept SchemaError as e:\n    print(f\"\u6570\u636e\u6821\u9a8c\u5f02\u5e38user_result_1:{e}\")\n\ntry:\n    user_result_2 = user_schema.validate(user_data_2)\n    print(f\"\u6570\u636e\u6821\u9a8cuser_result_2\uff1a{user_result_2}\")\nexcept SchemaError as e:\n    print(f\"\u6570\u636e\u6821\u9a8c\u5f02\u5e38user_result_2:{e}\")\n==========\u8c03\u7528\u7ed3\u679c==========\n\u6570\u636e\u6821\u9a8cuser_result_1\uff1a[{'name': 'jruing', 'money': 1000, 'addr': '\u4e2d\u56fd', 'email': '123456@qq.com'}]\n\u6570\u636e\u6821\u9a8c\u5f02\u5e38user_result_2:Or({'name': And(&lt;class 'str'&gt;), 'money': Or(&lt;class 'int'&gt;, &lt;class 'float'&gt;), Optional('addr'): And(&lt;class 'str'&gt;), Optional('email'): And(&lt;class 'str'&gt;, Regex('^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\\\.[a-zA-Z0-9-.]+$', flags=re.IGNORECASE))}) did not validate {'name': 'jruing', 'money': 1000.1, 'addr': '1111', 'email': '123456'}\nKey 'email' error:\nRegex('^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\\\.[a-zA-Z0-9-.]+$', flags=re.IGNORECASE) does not match '123456'\n</code></pre>"},{"location":"Python/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Schema%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E7%B1%BB%E5%9E%8B%E6%A0%A1%E9%AA%8C.html#forbidden","title":"Forbidden","text":"<p><code>Forbidder</code> \u5141\u8bb8\u4f60\u5b9a\u4e49\u4e00\u4e9b\u4e0d\u88ab\u5141\u8bb8\u7684\u503c\uff0c\u5982\u679c\u6570\u636e\u4e2d\u5305\u542b\u8fd9\u4e9b\u503c\uff0c\u9a8c\u8bc1\u5c06\u5931\u8d25\uff0c\u4e0b\u9762\u7684\u4f8b\u5b50\u8868\u793a\u5bc6\u7801 <code>password</code>\u5b57\u6bb5\u7684\u503c\u4e0d\u5141\u8bb8\u8bbe\u7f6e\u4e3a<code>123456</code></p> <pre><code>import re\n\nfrom schema import Schema, And, SchemaError, Or, Optional, Regex, Const, Use, Forbidden\n\nuser_schema = Schema([\n    {\n        \"name\": And(str),\n        \"money\": Or(int, float),\n        \"age\": Use(int),\n        Optional(\"addr\"): And(str),\n        Optional(\"email\"): And(str, Regex(r'^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$', flags=re.I)),\n        Optional(\"country\"): Const(\"\u4e2d\u56fd\"),\n        \"password\": And(str, Forbidden(\"123456\"))\n\n    }\n])\nuser_data_1 = [{\n    \"name\": \"jruing\",\n    \"money\": 1000,\n    \"age\": 11,\n    \"addr\": \"\u4e2d\u56fd\",\n    \"country\": \"\u4e2d\u56fd\",\n    \"email\": \"123456@qq.com\",\n    \"password\": \"123456\"\n\n}]\nuser_data_2 = [{\n    \"name\": \"jruing\",\n    \"money\": 1000.1,\n    \"age\": \"18\",\n    \"addr\": \"1111\",\n    \"email\": \"123456@qq.com\",\n    \"password\": \"1234561\"\n\n}]\n\ntry:\n    user_result_1 = user_schema.validate(user_data_1)\n    print(f\"\u6570\u636e\u6821\u9a8cuser_result_1\uff1a{user_result_1}\")\nexcept SchemaError as e:\n    print(f\"\u6570\u636e\u6821\u9a8c\u5f02\u5e38user_result_1:{e}\")\n\ntry:\n    user_result_2 = user_schema.validate(user_data_2)\n    print(f\"\u6570\u636e\u6821\u9a8cuser_result_2\uff1a{user_result_2}\")\nexcept SchemaError as e:\n    print(f\"\u6570\u636e\u6821\u9a8c\u5f02\u5e38user_result_2:{e}\")\n\n==========\u8c03\u7528\u7ed3\u679c==========    \n\u6570\u636e\u6821\u9a8cuser_result_1\uff1a[{'name': 'jruing', 'money': 1000, 'age': 11, 'addr': '\u4e2d\u56fd', 'country': '\u4e2d\u56fd', 'email': '123456@qq.com', 'password': '123456'}]\n\u6570\u636e\u6821\u9a8c\u5f02\u5e38user_result_2:Or({'name': And(&lt;class 'str'&gt;), 'money': Or(&lt;class 'int'&gt;, &lt;class 'float'&gt;), 'age': Use(&lt;class 'int'&gt;), Optional('addr'): And(&lt;class 'str'&gt;), Optional('email'): And(&lt;class 'str'&gt;, Regex('^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\\\.[a-zA-Z0-9-.]+$', flags=re.IGNORECASE)), Optional('country'): Const('\u4e2d\u56fd'), 'password': And(&lt;class 'str'&gt;, Forbidden('123456'))}) did not validate {'name': 'jruing', 'money': 1000.1, 'age': '18', 'addr': '1111', 'email': '123456@qq.com', 'password': '1234561'}\nKey 'password' error:\n'123456' does not match '1234561'\n</code></pre>"},{"location":"Spider/JsRpc%E7%BB%83%E4%B9%A0.html","title":"JsRPC\u7ec3\u4e60","text":""},{"location":"Spider/JsRpc%E7%BB%83%E4%B9%A0.html#_1","title":"\u4eca\u65e5\u7f51\u7ad9","text":"<p>aHR0cHM6Ly93d3cuY2NwcmVjLmNvbS9wcm9qZWN0U2VjUGFnZS8jL2NxenI=</p>"},{"location":"Spider/JsRpc%E7%BB%83%E4%B9%A0.html#_2","title":"\u6293\u5305\u5206\u6790","text":""},{"location":"Spider/JsRpc%E7%BB%83%E4%B9%A0.html#_3","title":"\u6253\u4e0a\u65ad\u70b9","text":"<p>\u5237\u65b0</p> <p></p>"},{"location":"Spider/JsRpc%E7%BB%83%E4%B9%A0.html#_4","title":"\u5206\u6790\u5806\u6808","text":"<p>\u52a0\u5bc6\u7684\u53c2\u6570\u662f<code>l</code> ,\u52a0\u5bc6\u524d\u7684\u53c2\u6570\u662f<code>'{\"id\":\"rsubtrx19v4o35b1\",\"projectKey\":\"honsan_cloud_ccprec\",\"clientKey\":\"rsubtrw8t68wb157\",\"token\":null,\"acts\":[{\"id\":\"rsubtrwsp80cx51c\",\"fullPath\":\"/ccprec.com.cn.web/client/info/cqweb_nonphy_cqzr\",\"args\":[1,20,null]}]}'</code></p> <p></p> <p>\u653e\u5f00\u65ad\u70b9\u8fd0\u884c,\u63a7\u5236\u53f0\u8f93\u51fa\u4e86\u89e3\u5bc6\u540e\u7684\u7ed3\u679c</p> <p></p> <p>\u52a0\u5165\u65ad\u70b9</p> <p></p>"},{"location":"Spider/JsRpc%E7%BB%83%E4%B9%A0.html#jsrpc","title":"\u542f\u52a8Jsrpc\u540e\u7aef","text":""},{"location":"Spider/JsRpc%E7%BB%83%E4%B9%A0.html#_5","title":"\u8d4b\u503c\u52a0\u5bc6\u51fd\u6570","text":"<p>\u4e0a\u9762\u56fe\u7247\u4e2d\u63d0\u5230\u4e86\u52a0\u5bc6\u51fd\u6570<code>this.aes.encode</code>,\u6253\u5f00\u65ad\u70b9,\u6267\u884c\u5230\u8be5\u52a0\u5bc6\u51fd\u6570\u7684\u65f6\u5019\u8d4b\u503c\u7ed9 aes_func,\u7136\u540e\u653e\u5f00debug</p> <p></p>"},{"location":"Spider/JsRpc%E7%BB%83%E4%B9%A0.html#jsrpc_1","title":"Jsrpc\u89e3\u5bc6","text":"<p>\u63a7\u5236\u53f0\u8f93\u5165</p> <pre><code>function Hlclient(wsURL) {\n    this.wsURL = wsURL;\n    this.handlers = {};\n    this.socket = {};\n\n    if (!wsURL) {\n        throw new Error('wsURL can not be empty!!')\n    }\n    this.connect()\n}\n\nHlclient.prototype.connect = function () {\n    console.log('begin of connect to wsURL: ' + this.wsURL);\n    var _this = this;\n    try {\n        this.socket[\"ySocket\"] = new WebSocket(this.wsURL);\n        this.socket[\"ySocket\"].onmessage = function (e) {\n            console.log(\"send func\", e.data);\n            _this.handlerRequest(e.data);\n        }\n    } catch (e) {\n        console.log(\"connection failed,reconnect after 10s\");\n        setTimeout(function () {\n            _this.connect()\n        }, 10000)\n    }\n    this.socket[\"ySocket\"].onclose = function () {\n        console.log(\"connection failed,reconnect after 10s\");\n        setTimeout(function () {\n            _this.connect()\n        }, 10000)\n    }\n\n};\nHlclient.prototype.send = function (msg) {\n    this.socket[\"ySocket\"].send(msg)\n}\n\nHlclient.prototype.regAction = function (func_name, func) {\n    if (typeof func_name !== 'string') {\n        throw new Error(\"an func_name must be string\");\n    }\n    if (typeof func !== 'function') {\n        throw new Error(\"must be function\");\n    }\n    console.log(\"register func_name: \" + func_name);\n    this.handlers[func_name] = func;\n\n}\nHlclient.prototype.handlerRequest = function (requestJson) {\n    var _this = this;\n    var result=JSON.parse(requestJson);\n    //console.log(result)\n    if (!result['action']) {\n        this.sendResult('','need request param {action}');\n        return\n    }\n    action=result[\"action\"]\n    var theHandler = this.handlers[action];\n    try {\n        if (!result[\"param\"]){\n            theHandler(function (response) {\n                _this.sendResult(action, response);\n            })\n        }else{\n            theHandler(function (response) {\n                _this.sendResult(action, response);\n            },result[\"param\"])\n        }\n\n    } catch (e) {\n        console.log(\"error: \" + e);\n        _this.sendResult(action+e);\n    }\n}\n\nHlclient.prototype.sendResult = function (action, e) {\n    this.send(action + atob(\"aGxeX14\") + e);\n}\n</code></pre>"},{"location":"Spider/JsRpc%E7%BB%83%E4%B9%A0.html#_6","title":"\u521b\u5efa\u52a0\u5bc6\u7684\u8c03\u7528\u63a5\u53e3","text":"<pre><code>var jiami = new Hlclient(\"ws://127.0.0.1:12080/ws?group=cc&amp;name=changchun&amp;action=jiami&amp;param=yes\")\n</code></pre>"},{"location":"Spider/JsRpc%E7%BB%83%E4%B9%A0.html#_7","title":"\u7f16\u5199\u52a0\u5bc6\u63a5\u53e3","text":"<pre><code># \u6ce8\u518c\u4e00\u4e2a\u540d\u79f0\u4e3ajiami\u7684\u65b9\u6cd5\njiami.regAction(\"jiami\", function (resolve,param) {\n     var a={\"id\":\"rstyd9hkvm8ykwhx\",\"projectKey\":\"honsan_cloud_ccprec\",\"clientKey\":\"rstyd9ghzxc05icg\",\"token\":null,\"acts\":[{\"id\":\"rstyd9hd528bi7vw\",\"fullPath\":\"/ccprec.com.cn.web/client/info/cqweb_nonphy_cqzr\",\"args\":[parseInt(param),20,null]}]}\n    s = JSON.stringify(a);\n    l = aes_func.encode(s)\n    resolve(l);\n})\n</code></pre>"},{"location":"Spider/JsRpc%E7%BB%83%E4%B9%A0.html#_8","title":"\u6d4b\u8bd5\u52a0\u5bc6\u63a5\u53e3","text":"<p>\u5730\u5740: http://127.0.0.1:12080/go?group=cc&amp;name=changchun&amp;action=jiami&amp;param=1, param\u6307\u7684\u662f\u9875\u6570</p> <p></p>"},{"location":"Spider/JsRpc%E7%BB%83%E4%B9%A0.html#_9","title":"\u521b\u5efa\u89e3\u5bc6\u63a5\u53e3","text":"<pre><code>var jiemi = new Hlclient(\"ws://127.0.0.1:12080/ws?group=cc&amp;name=changchun&amp;action=jiemi&amp;param=yes\")\n</code></pre>"},{"location":"Spider/JsRpc%E7%BB%83%E4%B9%A0.html#_10","title":"\u7f16\u5199\u89e3\u5bc6\u63a5\u53e3","text":"<pre><code>jiemi.regAction(\"jiemi\", function (resolve,param) {\n    console.log(param);\n    l = aes_func.decode(param)\n    resolve(l);\n})\n</code></pre>"},{"location":"Spider/JsRpc%E7%BB%83%E4%B9%A0.html#_11","title":"\u6d4b\u8bd5\u89e3\u5bc6\u63a5\u53e3","text":"<p>\u5730\u5740:http://127.0.0.1:12080/go?group=cc&amp;name=changchun&amp;action=jiami&amp;param=,param\u4e3a\u8bf7\u6c42\u6587\u7ae0\u7b2c\u4e00\u6b65\u8bf7\u6c42\u63a5\u53e3\u540e\u8fd4\u56de\u7684\u52a0\u5bc6\u7ed3\u679c</p> <p></p>"},{"location":"automation/Selenium%E6%8E%A5%E7%AE%A1%E5%B7%B2%E6%89%93%E5%BC%80%E7%9A%84%E6%B5%8F%E8%A7%88%E5%99%A8.html","title":"Selenium","text":""},{"location":"automation/Selenium%E6%8E%A5%E7%AE%A1%E5%B7%B2%E6%89%93%E5%BC%80%E7%9A%84%E6%B5%8F%E8%A7%88%E5%99%A8.html#_1","title":"\u542f\u52a8\u8c37\u6b4c\u6d4f\u89c8\u5668\u8fdc\u7a0b\u8c03\u8bd5","text":"<p><code>chrome.exe --remote-debugging-port=9222 --user-data-dir=\"\u67d0\u4e2a\u5b58\u5728\u7684\u6587\u4ef6\u5939\u5730\u5740\"</code></p>"},{"location":"automation/Selenium%E6%8E%A5%E7%AE%A1%E5%B7%B2%E6%89%93%E5%BC%80%E7%9A%84%E6%B5%8F%E8%A7%88%E5%99%A8.html#python","title":"\u65b0\u5efapython\u6587\u4ef6","text":"<pre><code>from selenium import webdriver\nfrom selenium.webdriver.chrome.options import Options\n\nchrome_options = Options()\nchrome_options.add_experimental_option(\"debuggerAddress\", \"127.0.0.1:9222\") # \u7aef\u53e3\u5373\u8fdc\u7a0b\u8c03\u8bd5\u5b9a\u4e49\u7684\u7aef\u53e3\nchrome_driver = \"C:\\Program Files (x86)\\Google\\Chrome\\Application\\chromedriver.exe\" # webdriver\u8def\u5f84\ndriver = webdriver.Chrome(chrome_driver, chrome_options=chrome_options)\nprint(driver.title)\n</code></pre>"},{"location":"database/postgres/Postgres%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Sequence%E8%87%AA%E5%A2%9E%E5%BA%8F%E5%88%97.html","title":"Sequence\u81ea\u589e\u5e8f\u5217","text":"<p>Sequence: \u6839\u636e\u6307\u5b9a\u7684\u89c4\u8303\u751f\u6210\u6574\u6570\u5e8f\u5217</p>"},{"location":"database/postgres/Postgres%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Sequence%E8%87%AA%E5%A2%9E%E5%BA%8F%E5%88%97.html#_1","title":"Sequence\u81ea\u589e\u5e8f\u5217","text":""},{"location":"database/postgres/Postgres%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Sequence%E8%87%AA%E5%A2%9E%E5%BA%8F%E5%88%97.html#_2","title":"\u521b\u5efa\u5e8f\u5217","text":"<pre><code>CREATE [ TEMPORARY | TEMP ] SEQUENCE name [ INCREMENT [ BY ] increment ]\n    [ MINVALUE minvalue | NO MINVALUE ] [ MAXVALUE maxvalue | NO MAXVALUE ]\n    [ START [ WITH ] start ] [ CACHE cache ] [ [ NO ] CYCLE ]\n    [ OWNED BY { table.column | NONE } ]\n\n /* \u521b\u5efa\u9ed8\u8ba4\u5e8f\u5217\uff0c\u4ece1\u5f00\u59cb\uff0c\u9012\u589e\u5e45\u5ea6\u4e3a1\uff0c\u6700\u5927\u503c\u4e3a2^63-1*/\n create sequence \u5e8f\u5217\u540d\u79f0;\n /* \u521b\u5efa\u6307\u5b9a\u5e8f\u5217 */\ncreate sequence \u5e8f\u5217\u540d\u79f0 increment by \u9012\u589e\u5e45\u5ea6 minvalue \u6700\u5c0f\u503c  maxvalue \u6700\u5927\u503c  start with \u5f00\u59cb\u503c;\n\n</code></pre>"},{"location":"database/postgres/Postgres%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Sequence%E8%87%AA%E5%A2%9E%E5%BA%8F%E5%88%97.html#_3","title":"\u4fee\u6539\u5e8f\u5217\u7684\u503c","text":""},{"location":"database/postgres/Postgres%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Sequence%E8%87%AA%E5%A2%9E%E5%BA%8F%E5%88%97.html#1","title":"\u65b9\u6cd5 1","text":"<pre><code>select setval('\u5e8f\u5217\u540d\u79f0',\u4fee\u6539\u540e\u7684\u503c)\uff1b\n</code></pre>"},{"location":"database/postgres/Postgres%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Sequence%E8%87%AA%E5%A2%9E%E5%BA%8F%E5%88%97.html#2","title":"\u65b9\u6cd5 2","text":"<pre><code>alter SEQUENCE \u5e8f\u5217\u540d\u79f0 RESTART WITH \u4fee\u6539\u540e\u7684\u503c;\n</code></pre>"},{"location":"database/postgres/Postgres%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Sequence%E8%87%AA%E5%A2%9E%E5%BA%8F%E5%88%97.html#_4","title":"\u5220\u9664\u5e8f\u5217","text":"<pre><code>drop sequence IF EXISTS \u5e8f\u5217\u540d\u79f0;\n</code></pre>"},{"location":"database/postgres/Postgres%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Sequence%E8%87%AA%E5%A2%9E%E5%BA%8F%E5%88%97.html#_5","title":"\u67e5\u770b\u6240\u6709\u5e8f\u5217","text":"<pre><code>SELECT c.relname FROM pg_class c WHERE c.relkind = 'S';\n</code></pre>"},{"location":"database/postgres/Postgres%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Sequence%E8%87%AA%E5%A2%9E%E5%BA%8F%E5%88%97.html#_6","title":"\u67e5\u770b\u5f53\u524d\u5e8f\u5217\u5c5e\u6027","text":"<pre><code>select * from \u5e8f\u5217\u540d\u79f0;\n</code></pre>"},{"location":"database/postgres/Postgres%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Sequence%E8%87%AA%E5%A2%9E%E5%BA%8F%E5%88%97.html#_7","title":"\u7ed9\u8868\u7684\u4e3b\u952e\u6307\u5b9a\u521b\u5efa\u597d\u7684\u5e8f\u5217","text":"<pre><code>alert table \u8868\u540d alert colum '\u4e3b\u952eid' set default nextval('\u8981\u6307\u5b9a\u7684\u5e8f\u5217\u540d\u79f0');\n</code></pre>"},{"location":"database/postgres/Postgres%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Sequence%E8%87%AA%E5%A2%9E%E5%BA%8F%E5%88%97.html#_8","title":"\u5e8f\u5217\u81ea\u589e","text":"<pre><code>select nextval('\u5e8f\u5217\u540d\u79f0');\n</code></pre>"},{"location":"database/postgres/Postgres%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Sequence%E8%87%AA%E5%A2%9E%E5%BA%8F%E5%88%97.html#_9","title":"\u5e8f\u5217\u51fd\u6570","text":"<pre><code>nextval: \u9012\u589e\u5e8f\u5217\u5bf9\u8c61\u5230\u5b83\u7684\u4e0b\u4e00\u4e2a\u6570\u503c\u5e76\u4e14\u8fd4\u56de\u8be5\u503c\ncurrval: \u83b7\u53d6\u5f53\u524d\u5e8f\u5217\u6700\u540e\u4e00\u6b21\u8fd4\u56de\u7684\u503c\uff0c\u5982\u679c\u8be5\u5e8f\u5217\u521b\u5efa\u540e\u672a\u88ab\u8c03\u7528\uff0c\u5b83\u53ef\u80fd\u4f1a\u8fd4\u56de\u4e00\u4e2a\u9519\u8bef\uff0c\u53ef\u4ee5\u7528\u4e8e\u5224\u65ad\u8be5\u5e8f\u5217\u51fd\u6570\u662f\u5426\u88ab\u5176\u4ed6\u4f1a\u8bdd\u8c03\u7528\nlastval: \u548ccurrval\u529f\u80fd\u57fa\u672c\u4e00\u76f4\uff0c\u5b83\u4e0d\u9700\u8981\u5e8f\u5217\u540d\u79f0\u4f5c\u4e3a\u53c2\u6570\uff0c\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\nsetval: \n1. setval(regclass, bigint)\uff1a\u91cd\u7f6e\u5e8f\u5217\u7684\u8ba1\u6570\u5668\u503c\uff0c\u8bbe\u7f6e\u5e8f\u5217\u7684\u8ba1\u6570\u5668\u7684\u503c\u672a\u6307\u5b9a\u503c\uff0c\u5c06\u5e8f\u5217\u7684is_calld\u5b57\u6bb5\u8bbe\u7f6e\u672aTrue\uff0c\u4e0b\u4e00\u6b21nextval\u5219\u4f1a\u5148\u9012\u589e\u5e8f\u5217\uff0c\u968f\u540e\u8fd4\u56de\u6570\u503c\n2. setval(regclass, bigint, boolean)\uff1a\u4e0e\u4e0a\u9762\u7684\u529f\u80fd\u57fa\u672c\u4e00\u76f4\uff0c\u591a\u4e86\u4e00\u4e2a\u5e03\u5c14\u53c2\u6570\uff0c\u8fd9\u4e2a\u53c2\u6570\u662f\u6307\u5b9ais_calld\u7684\u503c\uff0c\u5982\u679c\u5c06is_calld\u53c2\u6570\u7684\u503c\u8bbe\u5b9a\u4e3afalse\uff0c\u5219\u4e0b\u4e00\u6b21nextval\u8fd4\u56de\u8be5\u6570\u503c\uff0c\u4e0b\u4e0b\u4e00\u6b21nextval\u624d\u4f1a\u9012\u589e\u6570\u5217\n</code></pre>"},{"location":"database/postgres/Redis7.XCentos%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA.html","title":"Redis\u96c6\u7fa4","text":"<p>\u5b89\u88c5\u9ad8\u7248\u672cRedis\u9700\u8981\u5148\u5b89\u88c5Python3.x</p>"},{"location":"database/postgres/Redis7.XCentos%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA.html#_1","title":"\u4e0b\u8f7d","text":"<p>https://download.redis.io/redis-stable.tar.gz</p>"},{"location":"database/postgres/Redis7.XCentos%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA.html#_2","title":"\u90e8\u7f72","text":"<ol> <li>\u4e0a\u4f20\u89e3\u538b</li> </ol> <p><code>tar -zxvf  redis-stable.tar.gz</code></p> <ol> <li>\u7f16\u8bd1\u5b89\u88c5</li> </ol> <p><code>cd redis-stable    # \u5982\u679cmake\u51fa\u73b0\u5f02\u5e38\uff0c\u53ef\u4ee5\u5c1d\u8bd5make MALLOC=libc    make     # \u5c06redis\u5b89\u88c5\u5230/usr/local/redis-stable\u76ee\u5f55\u4e0b    make PREFIX=/usr/local/redis-stable install</code></p> <ol> <li>\u521b\u5efa6\u4e2a\u8282\u70b9\u7684\u76ee\u5f55</li> </ol> <p><code># \u521b\u5efa\u65e5\u5fd7\u76ee\u5f55    mkdir -p /usr/local/redis-cluster/{6379,6380,6381,6382,6383,6384}/log    # \u521b\u5efa\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55    mkdir -p /usr/local/redis-cluster/{6379,6380,6381,6382,6383,6384}/config</code></p> <ol> <li>\u5199\u5165\u914d\u7f6e\u6587\u4ef6(\u5199\u5165\u914d\u7f6e\u7684\u65f6\u5019\u8bf7\u52a1\u5fc5\u53bb\u6389\u6ce8\u91ca)</li> </ol> <p>```    # 6379\u8282\u70b9\u914d\u7f6e\u6587\u4ef6    cat &lt;&lt; EOF &gt; /usr/local/redis-cluster/6379/config/redis.conf    protected-mode no    bind 0.0.0.0    port 6379 # \u670d\u52a1\u76d1\u542c\u7aef\u53e3    daemonize yes # \u540e\u53f0\u542f\u52a8    pidfile /usr/local/redis-cluster/6379/redis_6379.pid    masterauth test-cluster # \u542f\u52a8 redis \u5bc6\u7801\u9a8c\u8bc1\uff0c\u4e3b\u8981\u662f\u9488\u5bf9 master \u5bf9\u5e94\u7684 slave \u8282\u70b9\u8bbe\u7f6e\u7684\uff0c\u5728 slave \u8282\u70b9\u6570\u636e\u540c\u6b65\u7684\u65f6\u5019\u7528\u5230    requirepass test-cluster # redis\u5bc6\u7801\uff0c#\u542f\u52a8 redis \u5bc6\u7801\u9a8c\u8bc1\uff0c\u4e00\u5b9a\u8981 requirepass \u548c masterauth \u540c\u65f6\u8bbe\u7f6e\u3002\u5bf9\u767b\u5f55\u6743\u9650\u505a\u9650\u5236\uff0credis\u6bcf\u4e2a\u8282\u70b9\u7684requirepass\u53ef\u4ee5\u662f\u72ec\u7acb\u3001\u4e0d\u540c\u7684\uff0c\u4f46\u5efa\u8bae\u548c masterauth \u8bbe\u7f6e\u6210\u4e00\u6837    appendonly yes # \u5f00\u542f\u6301\u4e45\u5316    dir /usr/local/redis-cluster/6379/ # AOF\u6587\u4ef6\u5b58\u653e\u76ee\u5f55    appendfilename \"appendonly.aof\" #AOF\u6587\u4ef6\u540d\u79f0\uff08\u9ed8\u8ba4\uff09    cluster-enabled yes # \u542f\u7528\u96c6\u7fa4    cluster-config-file \"nodes.conf\" # \u5173\u8054\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6    cluster-node-timeout 5000 # \u96c6\u7fa4\u8d85\u65f6\u65f6\u95f4    cluster-require-full-coverage no # \u53ea\u8981\u6709\u7ed3\u70b9\u5b95\u673a\u5bfc\u81f4 16384 \u4e2a\u69fd\u6ca1\u5168\u88ab\u8986\u76d6\uff0c\u6574\u4e2a\u96c6\u7fa4\u5c31\u5168\u90e8\u505c\u6b62\u670d\u52a1\uff0c\u6240\u4ee5\u4e00\u5b9a\u8981\u6539\u4e3a no    EOF</p> <p># 6380\u8282\u70b9\u914d\u7f6e\u6587\u4ef6    cat &lt;&lt; EOF &gt; /usr/local/redis-cluster/6380/config/redis.conf    protected-mode no    bind 0.0.0.0    port 6380    daemonize yes    pidfile /usr/local/redis-cluster/6380/redis_6380.pid    masterauth test-cluster    requirepass test-cluster     appendonly yes    dir /usr/local/redis-cluster/6380/    appendfilename \"appendonly.aof\"     cluster-enabled yes    cluster-config-file \"nodes.conf\"    cluster-node-timeout 5000    cluster-require-full-coverage no    EOF</p> <p># 6381,6382,6383,6384\u914d\u7f6e\u6587\u4ef6\u53c2\u8003\u4e0a\u9762\u7684</p> <p>```</p> <ol> <li>\u5206\u522b\u542f\u52a8redis</li> </ol> <p><code>redis-server /usr/local/redis-cluster/6379/config/redis.conf    redis-server /usr/local/redis-cluster/6380/config/redis.conf    redis-server /usr/local/redis-cluster/6381/config/redis.conf    redis-server /usr/local/redis-cluster/6382/config/redis.conf    redis-server /usr/local/redis-cluster/6383/config/redis.conf    redis-server /usr/local/redis-cluster/6387/config/redis.conf</code></p> <ol> <li>\u521b\u5efa\u96c6\u7fa4</li> </ol> <p><code>redis-cli -a \"test-cluster\" --cluster create 192.168.137.10:6379 192.168.137.10:6380 192.168.137.10:6381 192.168.137.10:6382 192.168.137.10:6383 192.168.137.10:6384 --cluster-replicas 1</code></p> <ol> <li>\u9a8c\u8bc1\u96c6\u7fa4</li> </ol> <p><code>redis-cli -h 192.168.137.10 -c -p 6380 -a \"test-cluster\"</code></p> <ol> <li>\u96c6\u7fa4\u67e5\u770b\u76f8\u5173\u547d\u4ee4</li> </ol> <p><code>1.\u96c6\u7fa4\u72b6\u6001    redis-cli -h ip -p 6401 -a password cluster info    2.\u96c6\u7fa4\u8282\u70b9\u4fe1\u606f    redis-cli -h ip -p 6401 -a password cluster nodes    3.\u8282\u70b9\u5185\u5b58\u3001cpu\u3001key\u6570\u91cf\u7b49\u4fe1\u606f\uff08\u6bcf\u4e2a\u8282\u70b9\u90fd\u9700\u67e5\u770b\uff09    redis-cli -h ip -p 6401 -a password info</code></p>"},{"location":"front/Javascript%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-js%E5%AE%9E%E7%8E%B0%E6%8B%B7%E8%B4%9D%E5%A4%8D%E5%88%B6%E5%8A%9F%E8%83%BD.html","title":"js\u62f7\u8d1d\u590d\u5236","text":"<pre><code>    /**\n     * \u590d\u5236\u5355\u884c\u5185\u5bb9\u5230\u7c98\u8d34\u677f\n     * content : \u9700\u8981\u590d\u5236\u7684\u5185\u5bb9\n     * message : \u590d\u5236\u5b8c\u540e\u7684\u63d0\u793a\uff0c\u4e0d\u4f20\u5219\u9ed8\u8ba4\u63d0\u793a\"\u590d\u5236\u6210\u529f\"\n     */\n    function copyToClip(content, message) {\n        var aux = document.createElement(\"input\");\n        aux.setAttribute(\"value\", content);\n        document.body.appendChild(aux);\n        aux.select();\n        document.execCommand(\"copy\");\n        document.body.removeChild(aux);\n        if (message == null) {\n            alert(\"\u590d\u5236\u6210\u529f\");\n        } else{\n            alert(message);\n        }\n    }\n</code></pre>"},{"location":"kubernetes/Docker-Compose%E5%AE%89%E8%A3%85.html","title":"Docker-Compose\u5b89\u88c5","text":""},{"location":"kubernetes/Docker-Compose%E5%AE%89%E8%A3%85.html#_1","title":"\u4e0b\u8f7d","text":"<p>https://github.com/docker/compose/releases</p>"},{"location":"kubernetes/Docker-Compose%E5%AE%89%E8%A3%85.html#_2","title":"\u5b89\u88c5","text":"<p>\u5c06\u6587\u4ef6\u4e0a\u4f20\u5230 /usr/local/src\u8def\u5f84\u4e0b</p> <pre><code># \u8d4b\u4e88\u53ef\u6267\u884c\u6743\u9650\nchmod +x /usr/local/src/docker-compose\n# \u67e5\u770b\u7248\u672c\n[root@localhost ~]# docker-compose -v\nDocker Compose version v2.24.0-birthday.10\n\n</code></pre>"},{"location":"other/UPX%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95.html","title":"UPX","text":""},{"location":"other/UPX%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95.html#_1","title":"\u7b80\u4ecb","text":"<pre><code>UPX\uff0c\u5373\"Ultimate Packer for eXecutables\"\uff0c\u662f\u4e00\u6b3e\u5e7f\u53d7\u63a8\u5d07\u7684\u514d\u8d39\u5f00\u6e90\u53ef\u6267\u884c\u6587\u4ef6\u538b\u7f29\u5de5\u5177\u3002\u5b83\u4ee5\u5176\u7b80\u6d01\u7684\u7f16\u5199\u65b9\u5f0f\u548c\u5f3a\u5927\u7684\u6269\u5c55\u6027\uff0c\u4e3a\u7528\u6237\u63d0\u4f9b\u4e86\u4e00\u4e2a\u9ad8\u6548\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u4e13\u95e8\u7528\u4e8e\u538b\u7f29\u53ef\u6267\u884c\u7684\u4e8c\u8fdb\u5236\u7a0b\u5e8f\u3001\u52a8\u6001\u94fe\u63a5\u5e93\u4ee5\u53ca\u5176\u4ed6\u7c7b\u578b\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u663e\u8457\u7f29\u51cf\u5b83\u4eec\u7684\u4f53\u79ef\u3002UPX\u7684\u6838\u5fc3\u4f18\u52bf\u5728\u4e8e\u5176\u60ca\u4eba\u7684\u538b\u7f29\u80fd\u529b\uff0c\u80fd\u591f\u5c06\u6587\u4ef6\u5927\u5c0f\u51cf\u5c1150%\u81f370%\uff0c\u6709\u6548\u8282\u7701\u78c1\u76d8\u7a7a\u95f4\uff0c\u964d\u4f4e\u7f51\u7edc\u4f20\u8f93\u5e26\u5bbd\u9700\u6c42\uff0c\u4ee5\u53ca\u51cf\u5c11\u5206\u53d1\u6210\u672c\u3002\u81ea1996\u5e74\u95ee\u4e16\u4ee5\u6765\uff0cUPX\u5728\u5b58\u50a8\u8d44\u6e90\u7a00\u7f3a\u7684\u5e74\u4ee3\uff0c\u5c24\u5176\u662f\u8f6f\u76d8\u76db\u884c\u65f6\u671f\uff0c\u5176\u5bf9\u53ef\u6267\u884c\u6587\u4ef6\u7684\u538b\u7f29\u6280\u672f\u663e\u5f97\u5c24\u4e3a\u5173\u952e\u3002\n\n\u9664\u4e86\u57fa\u672c\u7684\u538b\u7f29\u529f\u80fd\uff0cUPX\u8fd8\u5177\u5907\u4ee5\u4e0b\u663e\u8457\u4f18\u52bf\uff1a\n\n- \u53ef\u9760\u6027\uff1aUPX\u5185\u7f6e\u4e86\u4e00\u5957\u4e25\u5bc6\u7684\u6821\u9a8c\u673a\u5236\uff0c\u786e\u4fdd\u538b\u7f29\u524d\u540e\u7684\u6587\u4ef6\u4fdd\u6301\u5b8c\u6574\u6027\uff0c\u4fdd\u969c\u7a0b\u5e8f\u7684\u53ef\u9760\u6027\u3002\n- \u5b89\u5168\u6027\uff1a\u4f5c\u4e3a\u4e00\u4e2a\u957f\u671f\u5f00\u6e90\u7684\u9879\u76ee\uff0cUPX\u7684\u538b\u7f29\u903b\u8f91\u5bf9\u6240\u6709\u5f00\u53d1\u8005\u548c\u9632\u75c5\u6bd2\u8f6f\u4ef6\u5382\u5546\u5f00\u653e\uff0c\u4fbf\u4e8e\u9a8c\u8bc1\u5176\u5b89\u5168\u6027\u3002\n- \u89e3\u538b\u901f\u5ea6\uff1a\u5728\u73b0\u4ee3\u786c\u4ef6\u4e0a\uff0cUPX\u7684\u89e3\u538b\u901f\u5ea6\u8d85\u8fc7500MB/\u79d2\uff0c\u786e\u4fdd\u4e86\u5feb\u901f\u7684\u8fd0\u884c\u4f53\u9a8c\u3002\n- \u65e0\u5185\u5b58\u5f00\u9500\uff1a\u8fd0\u884c\u89e3\u538b\u540e\u7684\u7a0b\u5e8f\u4e0d\u4f1a\u589e\u52a0\u989d\u5916\u7684\u5185\u5b58\u8d1f\u62c5\uff0c\u4fdd\u6301\u7cfb\u7edf\u7684\u6d41\u7545\u8fd0\u884c\u3002\n- \u5353\u8d8a\u7684\u538b\u7f29\u6bd4\uff1a\u4e0e\u4f20\u7edf\u7684Zip\u538b\u7f29\u7b97\u6cd5\u76f8\u6bd4\uff0cUPX\u63d0\u4f9b\u4e86\u66f4\u4f18\u7684\u538b\u7f29\u6548\u679c\uff0c\u8fdb\u4e00\u6b65\u51cf\u5c11\u4e86\u5206\u53d1\u6587\u4ef6\u7684\u4f53\u79ef\uff0c\u8282\u7701\u4e86\u7f51\u7edc\u4f20\u8f93\u548c\u5b58\u50a8\u8d44\u6e90\u3002\n- \u901a\u7528\u6027\uff1aUPX\u652f\u6301\u591a\u79cd\u53ef\u6267\u884c\u6587\u4ef6\u683c\u5f0f\u7684\u6253\u5305\uff0c\u5305\u62ecWindows\u5e94\u7528\u7a0b\u5e8f\u548cDLL\u3001macOS\u5e94\u7528\u7a0b\u5e8f\u4ee5\u53caLinux\u53ef\u6267\u884c\u6587\u4ef6\u3002\n- \u53ef\u6269\u5c55\u6027\uff1a\u5f97\u76ca\u4e8e\u5176\u4f18\u79c0\u7684\u4ee3\u7801\u67b6\u6784\uff0cUPX\u80fd\u591f\u8f7b\u677e\u6dfb\u52a0\u5bf9\u65b0\u7684\u53ef\u6267\u884c\u6587\u4ef6\u683c\u5f0f\u548c\u538b\u7f29\u7b97\u6cd5\u7684\u652f\u6301\u3002\n\nUPX\u4ee5\u5176\u5353\u8d8a\u7684\u6027\u80fd\u548c\u591a\u529f\u80fd\u6027\uff0c\u6210\u4e3a\u4e86\u5f00\u53d1\u8005\u548c\u7cfb\u7edf\u7ba1\u7406\u5458\u5728\u6587\u4ef6\u538b\u7f29\u9886\u57df\u7684\u9996\u9009\u5de5\u5177\u3002\n\n</code></pre>"},{"location":"other/UPX%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95.html#_2","title":"\u4f7f\u7528\u8bf4\u660e","text":"<p>\u7528\u6cd5\uff1a <code>upx [option] \u6587\u4ef6\u540d</code></p> <p>\u538b\u7f29\u76f8\u5173\u53c2\u6570</p> <pre><code>-9 \u6216 \u2013best: \u4f7f\u7528\u6700\u9ad8\u7684\u538b\u7f29\u6bd4\uff0c\u8fd9\u901a\u5e38\u4f1a\u4ea7\u751f\u6700\u5c0f\u7684\u6587\u4ef6\u5927\u5c0f\uff0c\u4f46\u538b\u7f29\u901f\u5ea6\u8f83\u6162\u3002\n-6 \u6216 \u2013ultra: \u4f7f\u7528\u8f83\u9ad8\u7684\u538b\u7f29\u6bd4\uff0c\u538b\u7f29\u901f\u5ea6\u8f83\u5feb\u4e8e -9\u3002\n-5 \u6216 \u2013super: \u4f7f\u7528\u8f83\u597d\u7684\u538b\u7f29\u6bd4\uff0c\u538b\u7f29\u901f\u5ea6\u66f4\u5feb\u3002\n-4 \u6216 \u2013fast: \u4f7f\u7528\u8f83\u5feb\u7684\u538b\u7f29\u6bd4\uff0c\u9002\u5408\u5feb\u901f\u538b\u7f29\u3002\n-3 \u6216 \u2013veryfast: \u4f7f\u7528\u6700\u5feb\u7684\u538b\u7f29\u6bd4\uff0c\u9002\u5408\u5feb\u901f\u5904\u7406\u5927\u91cf\u6587\u4ef6\u3002\n</code></pre> <p>\u8f93\u51fa\u63a7\u5236\u53c2\u6570</p> <pre><code>-o \u6216 \u2013output &lt;file&gt;: \u6307\u5b9a\u538b\u7f29\u540e\u8f93\u51fa\u6587\u4ef6\u7684\u8def\u5f84\u548c\u540d\u79f0\u3002\n-d \u6216 --decompress: \u89e3\u538b\u5df2\u538b\u7f29\u7684\u6587\u4ef6\u3002\n-t \u6216 \u2013test: \u6d4b\u8bd5\u538b\u7f29\u540e\u7684\u6587\u4ef6\u662f\u5426\u4ecd\u53ef\u6b63\u5e38\u8fd0\u884c\u3002\n-v \u6216 \u2013verbose: \u8f93\u51fa\u8be6\u7ec6\u7684\u538b\u7f29\u4fe1\u606f\u3002\n-qq \u6216 \u2013quiet: \u9759\u9ed8\u6a21\u5f0f\uff0c\u4e0d\u8f93\u51fa\u4efb\u4f55\u4fe1\u606f\u3002\n</code></pre> <p>\u5176\u4ed6\u5e38\u7528\u53c2\u6570</p> <pre><code>-s \u6216 \u2013strip: \u79fb\u9664\u8c03\u8bd5\u4fe1\u606f\u3002\n-a \u6216 \u2013add &lt;file&gt;: \u5411\u538b\u7f29\u540e\u7684\u53ef\u6267\u884c\u6587\u4ef6\u6dfb\u52a0\u4e00\u4e2a\u6216\u591a\u4e2a\u6587\u4ef6\u3002\n-r \u6216 \u2013replace: \u66ff\u6362\u538b\u7f29\u6587\u4ef6\u4e2d\u7684\u67d0\u4e2a\u8d44\u6e90\u3002\n-m \u6216 \u2013move: \u79fb\u52a8\u6307\u5b9a\u7684\u8d44\u6e90\u3002\n-l \u6216 \u2013list: \u5217\u51fa\u538b\u7f29\u6587\u4ef6\u4e2d\u7684\u6240\u6709\u8d44\u6e90\u3002\n-i \u6216 \u2013info: \u663e\u793a\u538b\u7f29\u6587\u4ef6\u7684\u4fe1\u606f\u3002\n-h \u6216 \u2013help: \u663e\u793a\u5e2e\u52a9\u4fe1\u606f\u3002\n-V \u6216 \u2013version: \u663e\u793a UPX \u7684\u7248\u672c\u4fe1\u606f\u3002\n</code></pre>"},{"location":"other/UPX%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95.html#_3","title":"\u6d4b\u8bd5\u9a8c\u8bc1","text":"<pre><code># \u91c7\u7528\u4f7f\u7528\u6700\u9ad8\u7684\u538b\u7f29\u6bd4\u8fdb\u884c\u538b\u7f29\nC:\\Users\\Lenovo\\Desktop&gt;upx.exe -9 caddy.exe\n                       Ultimate Packer for eXecutables\n                          Copyright (C) 1996 - 2024\nUPX 4.2.4       Markus Oberhumer, Laszlo Molnar &amp; John Reiser    May 9th 2024\n\n        File size         Ratio      Format      Name\n   --------------------   ------   -----------   -----------\n  41527296 -&gt;  12843520   30.93%    win64/pe     caddy.exe                                                                                                                                                                                      Packed 1 file.\n# \u538b\u7f29\u524d\uff1a39.6 MB (41,527,296 \u5b57\u8282)  \u538b\u7f29\u540e\uff1a12.2MB (12,843,520 \u5b57\u8282)\n# \u6d4b\u8bd5\u538b\u7f29\u540e\u662f\u5426\u53ef\u4ee5\u6b63\u5e38\u6267\u884c\nC:\\Users\\Lenovo\\Desktop&gt;upx.exe -t caddy.exe\n                       Ultimate Packer for eXecutables\n                          Copyright (C) 1996 - 2024\nUPX 4.2.4       Markus Oberhumer, Laszlo Molnar &amp; John Reiser    May 9th 2024\n\ntesting caddy.exe [OK]\n\nTested 1 file.\n</code></pre>"},{"location":"other/%E5%9F%BA%E4%BA%8E%E8%AE%A2%E9%98%85%E5%8F%B7%E5%BC%80%E5%8F%91%E5%B1%9E%E4%BA%8E%E8%87%AA%E5%B7%B1%E7%9A%84%E5%BE%AE%E4%BF%A1%E6%B6%88%E6%81%AF%E9%80%9A%E7%9F%A5.html","title":"\u8ba2\u9605\u53f7\u6d88\u606f\u901a\u77e5","text":""},{"location":"other/%E5%9F%BA%E4%BA%8E%E8%AE%A2%E9%98%85%E5%8F%B7%E5%BC%80%E5%8F%91%E5%B1%9E%E4%BA%8E%E8%87%AA%E5%B7%B1%E7%9A%84%E5%BE%AE%E4%BF%A1%E6%B6%88%E6%81%AF%E9%80%9A%E7%9F%A5.html#_1","title":"\u51c6\u5907\u5de5\u4f5c","text":"<p>\u8ba2\u9605\u53f7\uff1a1\u4e2a\uff0c\u53ef\u4ee5\u7533\u8bf7\u4e00\u4e2a\u6d4b\u8bd5\uff08https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login\uff09\uff0c\u4e00\u822c\u4e0d\u88ab\u4e3e\u62a5\u662f\u4e0d\u4f1a\u8fc7\u671f\u7684</p> <p>\u670d\u52a1\u5668\uff1a1\u4e2a</p>"},{"location":"other/%E5%9F%BA%E4%BA%8E%E8%AE%A2%E9%98%85%E5%8F%B7%E5%BC%80%E5%8F%91%E5%B1%9E%E4%BA%8E%E8%87%AA%E5%B7%B1%E7%9A%84%E5%BE%AE%E4%BF%A1%E6%B6%88%E6%81%AF%E9%80%9A%E7%9F%A5.html#_2","title":"\u6b65\u9aa4","text":""},{"location":"other/%E5%9F%BA%E4%BA%8E%E8%AE%A2%E9%98%85%E5%8F%B7%E5%BC%80%E5%8F%91%E5%B1%9E%E4%BA%8E%E8%87%AA%E5%B7%B1%E7%9A%84%E5%BE%AE%E4%BF%A1%E6%B6%88%E6%81%AF%E9%80%9A%E7%9F%A5.html#_3","title":"\u524d\u7f6e\u5de5\u4f5c","text":"<ol> <li>\u4fdd\u5b58\u6d4b\u8bd5\u53f7\u4fe1\u606f <code>appID</code> \u548c <code>appsecret</code></li> </ol> <ol> <li>\u7528\u5fae\u4fe1\u626b\u7801\u5173\u6ce8<code>\u6d4b\u8bd5\u53f7\u7684\u4e8c\u7ef4\u7801</code></li> </ol> <ol> <li>\u521b\u5efa\u6d4b\u8bd5\u6a21\u677f</li> </ol> <p>\u6ce8\u610f\uff1a\u5185\u5bb9\u586b\u5145\u90e8\u5206\u5fc5\u987b\u4ee5<code>.DATA</code>\u7ed3\u5c3e</p>"},{"location":"other/%E5%9F%BA%E4%BA%8E%E8%AE%A2%E9%98%85%E5%8F%B7%E5%BC%80%E5%8F%91%E5%B1%9E%E4%BA%8E%E8%87%AA%E5%B7%B1%E7%9A%84%E5%BE%AE%E4%BF%A1%E6%B6%88%E6%81%AF%E9%80%9A%E7%9F%A5.html#_4","title":"\u53d1\u9001\u6d88\u606f","text":"<ol> <li>\u83b7\u53d6Token</li> </ol> <p>GET https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid=&amp;secret= <ol> <li>\u53d1\u9001\u6d88\u606f</li> </ol> <p>POST https://api.weixin.qq.com/cgi-bin/message/template/send?access_token= <p>\u8bf7\u6c42\u62a5\u6587</p> <p><code>json    {        \"touser\":\"oLcqr6GwmWk2jB74xN3P7dXIFZpU\", // \u53d1\u9001\u4eba        \"template_id\":\"0N12-6TdpI9j_fLp-98jRASvMHs0GPdAVUdYKZOUSUA\", // \u6d88\u606f\u6a21\u677fid        \"url\":\"http://weixin.qq.com/download\", // \u8df3\u8f6cURL\u5730\u5740        \"topcolor\":\"#FF0000\",         \"data\":{                \"content\": { // \u5185\u5bb9\u586b\u5145\u5b57\u6bb5                    \"value\":\"\u9ec4\u5148\u751f\" // \u503c                }        }    }</code></p>"},{"location":"other/%E5%9F%BA%E4%BA%8E%E8%AE%A2%E9%98%85%E5%8F%B7%E5%BC%80%E5%8F%91%E5%B1%9E%E4%BA%8E%E8%87%AA%E5%B7%B1%E7%9A%84%E5%BE%AE%E4%BF%A1%E6%B6%88%E6%81%AF%E9%80%9A%E7%9F%A5.html#_5","title":"\u5c55\u793a\u7ed3\u679c","text":""}]}